"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/v1/mood-entries/route";
exports.ids = ["app/api/v1/mood-entries/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "pg":
/*!*********************!*\
  !*** external "pg" ***!
  \*********************/
/***/ ((module) => {

module.exports = import("pg");;

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fv1%2Fmood-entries%2Froute&page=%2Fapi%2Fv1%2Fmood-entries%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fv1%2Fmood-entries%2Froute.ts&appDir=%2FUsers%2Fasimsinanyuksel%2FDesktop%2FMoodTracker%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fasimsinanyuksel%2FDesktop%2FMoodTracker&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!":
/*!***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fv1%2Fmood-entries%2Froute&page=%2Fapi%2Fv1%2Fmood-entries%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fv1%2Fmood-entries%2Froute.ts&appDir=%2FUsers%2Fasimsinanyuksel%2FDesktop%2FMoodTracker%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fasimsinanyuksel%2FDesktop%2FMoodTracker&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D! ***!
  \***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_asimsinanyuksel_Desktop_MoodTracker_src_app_api_v1_mood_entries_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/v1/mood-entries/route.ts */ \"(rsc)/./src/app/api/v1/mood-entries/route.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_Users_asimsinanyuksel_Desktop_MoodTracker_src_app_api_v1_mood_entries_route_ts__WEBPACK_IMPORTED_MODULE_3__]);\n_Users_asimsinanyuksel_Desktop_MoodTracker_src_app_api_v1_mood_entries_route_ts__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"standalone\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/v1/mood-entries/route\",\n        pathname: \"/api/v1/mood-entries\",\n        filename: \"route\",\n        bundlePath: \"app/api/v1/mood-entries/route\"\n    },\n    resolvedPagePath: \"/Users/asimsinanyuksel/Desktop/MoodTracker/src/app/api/v1/mood-entries/route.ts\",\n    nextConfigOutput,\n    userland: _Users_asimsinanyuksel_Desktop_MoodTracker_src_app_api_v1_mood_entries_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/v1/mood-entries/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZ2MSUyRm1vb2QtZW50cmllcyUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGdjElMkZtb29kLWVudHJpZXMlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZ2MSUyRm1vb2QtZW50cmllcyUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmFzaW1zaW5hbnl1a3NlbCUyRkRlc2t0b3AlMkZNb29kVHJhY2tlciUyRnNyYyUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGVXNlcnMlMkZhc2ltc2luYW55dWtzZWwlMkZEZXNrdG9wJTJGTW9vZFRyYWNrZXImaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9c3RhbmRhbG9uZSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUMrQjtBQUM1RztBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCxxQyIsInNvdXJjZXMiOlsid2VicGFjazovL21vb2QtdHJhY2tlci8/OThmMSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvVXNlcnMvYXNpbXNpbmFueXVrc2VsL0Rlc2t0b3AvTW9vZFRyYWNrZXIvc3JjL2FwcC9hcGkvdjEvbW9vZC1lbnRyaWVzL3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcInN0YW5kYWxvbmVcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvdjEvbW9vZC1lbnRyaWVzL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvdjEvbW9vZC1lbnRyaWVzXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS92MS9tb29kLWVudHJpZXMvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvVXNlcnMvYXNpbXNpbmFueXVrc2VsL0Rlc2t0b3AvTW9vZFRyYWNrZXIvc3JjL2FwcC9hcGkvdjEvbW9vZC1lbnRyaWVzL3JvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS92MS9tb29kLWVudHJpZXMvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fv1%2Fmood-entries%2Froute&page=%2Fapi%2Fv1%2Fmood-entries%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fv1%2Fmood-entries%2Froute.ts&appDir=%2FUsers%2Fasimsinanyuksel%2FDesktop%2FMoodTracker%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fasimsinanyuksel%2FDesktop%2FMoodTracker&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/v1/mood-entries/route.ts":
/*!**********************************************!*\
  !*** ./src/app/api/v1/mood-entries/route.ts ***!
  \**********************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_api_storage_postgres_adapter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/api-storage/postgres-adapter */ \"(rsc)/./src/lib/api-storage/postgres-adapter.ts\");\n/* harmony import */ var _lib_utils_dateUtils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/utils/dateUtils */ \"(rsc)/./src/lib/utils/dateUtils.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_lib_api_storage_postgres_adapter__WEBPACK_IMPORTED_MODULE_1__]);\n_lib_api_storage_postgres_adapter__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Initialize PostgreSQL database\nconst db = _lib_api_storage_postgres_adapter__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getInstance();\nasync function GET(request) {\n    try {\n        // Debug: Log environment variables (remove in production)\n        console.log(\"DATABASE_URL exists:\", !!process.env.DATABASE_URL);\n        console.log(\"NODE_ENV:\", \"development\");\n        const { searchParams } = new URL(request.url);\n        const startDate = searchParams.get(\"startDate\");\n        const endDate = searchParams.get(\"endDate\");\n        const limit = searchParams.get(\"limit\");\n        const offset = searchParams.get(\"offset\");\n        // Get mood entries from PostgreSQL database\n        let entries;\n        try {\n            if (startDate && endDate) {\n                entries = await db.getMoodEntriesByDateRange(\"default-user\", startDate, endDate);\n            } else {\n                entries = await db.getAllMoodEntries(\"default-user\");\n            }\n            // Transform API response to UI format\n            const transformedEntries = entries.map((entry)=>{\n                // Handle date conversion - entry_date is a string from PostgreSQL\n                const date = new Date(entry.entry_date);\n                const year = date.getFullYear();\n                const month = String(date.getMonth() + 1).padStart(2, \"0\");\n                const day = String(date.getDate()).padStart(2, \"0\");\n                const entryDate = `${year}-${month}-${day}`;\n                return {\n                    id: entry.id.toString(),\n                    userId: entry.user_id,\n                    rating: entry.rating,\n                    notes: entry.notes,\n                    date: entryDate,\n                    entryDate: entryDate,\n                    createdAt: entry.created_at,\n                    updatedAt: entry.updated_at,\n                    status: entry.status,\n                    tags: entry.tags || [],\n                    metadata: entry.metadata || {}\n                };\n            });\n            // Apply pagination\n            const limitNum = limit ? parseInt(limit) : 50;\n            const offsetNum = offset ? parseInt(offset) : 0;\n            const paginatedEntries = transformedEntries.slice(offsetNum, offsetNum + limitNum);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                data: paginatedEntries,\n                pagination: {\n                    total: transformedEntries.length,\n                    limit: limitNum,\n                    offset: offsetNum,\n                    hasMore: offsetNum + limitNum < transformedEntries.length\n                }\n            });\n        } catch (dbError) {\n            console.error(\"❌ Database error:\", dbError);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Database connection failed\",\n                details: dbError instanceof Error ? dbError.message : \"Unknown database error\"\n            }, {\n                status: 500\n            });\n        }\n    } catch (error) {\n        const errorMessage = error instanceof Error ? error.message : \"Unknown error\";\n        console.error(\"❌ Error fetching mood entries:\", error);\n        console.error(\"❌ Error details:\", {\n            message: errorMessage,\n            stack: error instanceof Error ? error.stack : undefined,\n            name: error instanceof Error ? error.name : \"Unknown\"\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: {\n                code: \"INTERNAL_ERROR\",\n                message: \"Failed to fetch mood entries\",\n                details: errorMessage\n            }\n        }, {\n            status: 500\n        });\n    }\n}\nasync function POST(request) {\n    try {\n        const body = await request.json();\n        // Validate required fields\n        if (!body.rating || body.rating < 1 || body.rating > 10) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: {\n                    code: \"VALIDATION_ERROR\",\n                    message: \"Rating must be between 1 and 10\"\n                }\n            }, {\n                status: 400\n            });\n        }\n        // Create mood entry in PostgreSQL database\n        const newEntry = await db.createMoodEntry({\n            user_id: \"default-user\",\n            rating: body.rating,\n            notes: body.notes || null,\n            entry_date: body.entryDate || (0,_lib_utils_dateUtils__WEBPACK_IMPORTED_MODULE_2__.getTodayLocal)(),\n            status: \"active\",\n            tags: body.tags || [],\n            metadata: body.metadata || {}\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(newEntry, {\n            status: 201\n        });\n    } catch (error) {\n        console.error(\"Error creating mood entry:\", error);\n        // Handle duplicate key constraint (user already has an entry for this date)\n        if (error.code === \"23505\" && error.constraint === \"moodtracker_user_id_entry_date_key\") {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: {\n                    code: \"DUPLICATE_ENTRY\",\n                    message: \"You already have a mood entry for this date. Please update your existing entry instead.\"\n                }\n            }, {\n                status: 409\n            });\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: {\n                code: \"INTERNAL_ERROR\",\n                message: \"Failed to create mood entry\"\n            }\n        }, {\n            status: 500\n        });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS92MS9tb29kLWVudHJpZXMvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBdUQ7QUFFUztBQUNYO0FBRXJELGlDQUFpQztBQUNqQyxNQUFNRyxLQUFLRix5RUFBZUEsQ0FBQ0csV0FBVztBQUUvQixlQUFlQyxJQUFJQyxPQUFvQjtJQUM1QyxJQUFJO1FBQ0YsMERBQTBEO1FBQzFEQyxRQUFRQyxHQUFHLENBQUMsd0JBQXdCLENBQUMsQ0FBQ0MsUUFBUUMsR0FBRyxDQUFDQyxZQUFZO1FBQzlESixRQUFRQyxHQUFHLENBQUMsYUFaaEI7UUFjSSxNQUFNLEVBQUVJLFlBQVksRUFBRSxHQUFHLElBQUlDLElBQUlQLFFBQVFRLEdBQUc7UUFDNUMsTUFBTUMsWUFBWUgsYUFBYUksR0FBRyxDQUFDO1FBQ25DLE1BQU1DLFVBQVVMLGFBQWFJLEdBQUcsQ0FBQztRQUNqQyxNQUFNRSxRQUFRTixhQUFhSSxHQUFHLENBQUM7UUFDL0IsTUFBTUcsU0FBU1AsYUFBYUksR0FBRyxDQUFDO1FBRXhCLDRDQUE0QztRQUM1QyxJQUFJSTtRQUVKLElBQUk7WUFDRixJQUFJTCxhQUFhRSxTQUFTO2dCQUMxQkcsVUFBVSxNQUFNakIsR0FBR2tCLHlCQUF5QixDQUFDLGdCQUFnQk4sV0FBV0U7WUFDMUUsT0FBTztnQkFDTEcsVUFBVSxNQUFNakIsR0FBR21CLGlCQUFpQixDQUFDO1lBQ3ZDO1lBRUEsc0NBQXNDO1lBQ3RDLE1BQU1DLHFCQUFxQkgsUUFBUUksR0FBRyxDQUFDQyxDQUFBQTtnQkFDckMsa0VBQWtFO2dCQUNsRSxNQUFNQyxPQUFPLElBQUlDLEtBQUtGLE1BQU1HLFVBQVU7Z0JBQ3RDLE1BQU1DLE9BQU9ILEtBQUtJLFdBQVc7Z0JBQzdCLE1BQU1DLFFBQVFDLE9BQU9OLEtBQUtPLFFBQVEsS0FBSyxHQUFHQyxRQUFRLENBQUMsR0FBRztnQkFDdEQsTUFBTUMsTUFBTUgsT0FBT04sS0FBS1UsT0FBTyxJQUFJRixRQUFRLENB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S3hCLFFBQVEsSUFBSSxDQUFDO1FBQzlCO1FBRUEsT0FBT2xELHFEQUFZQSxDQUFDd0QsSUFBSSxDQUFDbUIsVUFBVTtZQUFFM0IsUUFBUTtRQUFJO0lBRW5ELEVBQUUsT0FBT2UsT0FBWTtRQUNuQnhELFFBQVF3RCxLQUFLLENBQUMsOEJBQThCQTtRQUU1Qyw0RUFBNEU7UUFDNUUsSUFBSUEsTUFBTVMsSUFBSSxLQUFLLFdBQVdULE1BQU1jLFVBQVUsS0FBSyxzQ0FBc0M7WUFDdkYsT0FBTzdFLHFEQUFZQSxDQUFDd0QsSUFBSSxDQUN0QjtnQkFDRWUsU0FBUztnQkFDVFIsT0FBTztvQkFDTFMsTUFBTTtvQkFDTk4sU0FBUztnQkFDWDtZQUNGLEdBQ0E7Z0JBQUVsQixRQUFRO1lBQUk7UUFFbEI7UUFFQSxPQUFPaEQscURBQVlBLENBQUN3RCxJQUFJLENBQ3RCO1lBQ0VlLFNBQVM7WUFDVFIsT0FBTztnQkFDTFMsTUFBTTtnQkFDTk4sU0FBUztZQUNYO1FBQ0YsR0FDQTtZQUFFbEIsUUFBUTtRQUFJO0lBRWxCO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tb29kLXRyYWNrZXIvLi9zcmMvYXBwL2FwaS92MS9tb29kLWVudHJpZXMvcm91dGUudHM/OWM3YyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInXG5pbXBvcnQgeyBEYXRhVHJhbnNmb3JtU2VydmljZSB9IGZyb20gJ0AvbGliL21vb2QtYXBpL2NsaWVudC9EYXRhVHJhbnNmb3JtU2VydmljZSdcbmltcG9ydCBQb3N0Z3Jlc0FkYXB0ZXIgZnJvbSAnQC9saWIvYXBpLXN0b3JhZ2UvcG9zdGdyZXMtYWRhcHRlcidcbmltcG9ydCB7IGdldFRvZGF5TG9jYWwgfSBmcm9tICdAL2xpYi91dGlscy9kYXRlVXRpbHMnXG5cbi8vIEluaXRpYWxpemUgUG9zdGdyZVNRTCBkYXRhYmFzZVxuY29uc3QgZGIgPSBQb3N0Z3Jlc0FkYXB0ZXIuZ2V0SW5zdGFuY2UoKVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgLy8gRGVidWc6IExvZyBlbnZpcm9ubWVudCB2YXJpYWJsZXMgKHJlbW92ZSBpbiBwcm9kdWN0aW9uKVxuICAgIGNvbnNvbGUubG9nKCdEQVRBQkFTRV9VUkwgZXhpc3RzOicsICEhcHJvY2Vzcy5lbnYuREFUQUJBU0VfVVJMKVxuICAgIGNvbnNvbGUubG9nKCdOT0RFX0VOVjonLCBwcm9jZXNzLmVudi5OT0RFX0VOVilcbiAgICBcbiAgICBjb25zdCB7IHNlYXJjaFBhcmFtcyB9ID0gbmV3IFVSTChyZXF1ZXN0LnVybClcbiAgICBjb25zdCBzdGFydERhdGUgPSBzZWFyY2hQYXJhbXMuZ2V0KCdzdGFydERhdGUnKVxuICAgIGNvbnN0IGVuZERhdGUgPSBzZWFyY2hQYXJhbXMuZ2V0KCdlbmREYXRlJylcbiAgICBjb25zdCBsaW1pdCA9IHNlYXJjaFBhcmFtcy5nZXQoJ2xpbWl0JylcbiAgICBjb25zdCBvZmZzZXQgPSBzZWFyY2hQYXJhbXMuZ2V0KCdvZmZzZXQnKVxuXG4gICAgICAgICAgICAvLyBHZXQgbW9vZCBlbnRyaWVzIGZyb20gUG9zdGdyZVNRTCBkYXRhYmFzZVxuICAgICAgICAgICAgbGV0IGVudHJpZXNcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgaWYgKHN0YXJ0RGF0ZSAmJiBlbmREYXRlKSB7XG4gICAgICAgICAgICAgIGVudHJpZXMgPSBhd2FpdCBkYi5nZXRNb29kRW50cmllc0J5RGF0ZVJhbmdlKCdkZWZhdWx0LXVzZXInLCBzdGFydERhdGUsIGVuZERhdGUpXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBlbnRyaWVzID0gYXdhaXQgZGIuZ2V0QWxsTW9vZEVudHJpZXMoJ2RlZmF1bHQtdXNlcicpXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFRyYW5zZm9ybSBBUEkgcmVzcG9uc2UgdG8gVUkgZm9ybWF0XG4gICAgICAgICAgICBjb25zdCB0cmFuc2Zvcm1lZEVudHJpZXMgPSBlbnRyaWVzLm1hcChlbnRyeSA9PiB7XG4gICAgICAgICAgICAgIC8vIEhhbmRsZSBkYXRlIGNvbnZlcnNpb24gLSBlbnRyeV9kYXRlIGlzIGEgc3RyaW5nIGZyb20gUG9zdGdyZVNRTFxuICAgICAgICAgICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoZW50cnkuZW50cnlfZGF0ZSk7XG4gICAgICAgICAgICAgIGNvbnN0IHllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKCk7XG4gICAgICAgICAgICAgIGNvbnN0IG1vbnRoID0gU3RyaW5nKGRhdGUuZ2V0TW9udGgoKSArIDEpLnBhZFN0YXJ0KDIsICcwJyk7XG4gICAgICAgICAgICAgIGNvbnN0IGRheSA9IFN0cmluZyhkYXRlLmdldERhdGUoKSkucGFkU3RhcnQoMiwgJzAnKTtcbiAgICAgICAgICAgICAgY29uc3QgZW50cnlEYXRlID0gYCR7eWVhcn0tJHttb250aH0tJHtkYXl9YDtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgaWQ6IGVudHJ5LmlkLnRvU3RyaW5nKCksXG4gICAgICAgICAgICAgICAgdXNlcklkOiBlbnRyeS51c2VyX2lkLFxuICAgICAgICAgICAgICAgIHJhdGluZzogZW50cnkucmF0aW5nLFxuICAgICAgICAgICAgICAgIG5vdGVzOiBlbnRyeS5ub3RlcyxcbiAgICAgICAgICAgICAgICBkYXRlOiBlbnRyeURhdGUsIC8vIENvbnZlcnQgdG8gZGF0ZSBvbmx5XG4gICAgICAgICAgICAgICAgZW50cnlEYXRlOiBlbnRyeURhdGUsIC8vIEFsc28gcHJvdmlkZSBlbnRyeURhdGUgZm9yIGNvbXBhdGliaWxpdHlcbiAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6IGVudHJ5LmNyZWF0ZWRfYXQsXG4gICAgICAgICAgICAgICAgdXBkYXRlZEF0OiBlbnRyeS51cGRhdGVkX2F0LFxuICAgICAgICAgICAgICAgIHN0YXR1czogZW50cnkuc3RhdHVzLFxuICAgICAgICAgICAgICAgIHRhZ3M6IGVudHJ5LnRhZ3MgfHwgW10sXG4gICAgICAgICAgICAgICAgbWV0YWRhdGE6IGVudHJ5Lm1ldGFkYXRhIHx8IHt9XG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gQXBwbHkgcGFnaW5hdGlvblxuICAgICAgICAgICAgY29uc3QgbGltaXROdW0gPSBsaW1pdCA/IHBhcnNlSW50KGxpbWl0KSA6IDUwXG4gICAgICAgICAgICBjb25zdCBvZmZzZXROdW0gPSBvZmZzZXQgPyBwYXJzZUludChvZmZzZXQpIDogMFxuICAgICAgICAgICAgY29uc3QgcGFnaW5hdGVkRW50cmllcyA9IHRyYW5zZm9ybWVkRW50cmllcy5zbGljZShvZmZzZXROdW0sIG9mZnNldE51bSArIGxpbWl0TnVtKVxuXG4gICAgICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgICAgICAgICBkYXRhOiBwYWdpbmF0ZWRFbnRyaWVzLFxuICAgICAgICAgICAgICBwYWdpbmF0aW9uOiB7XG4gICAgICAgICAgICAgICAgdG90YWw6IHRyYW5zZm9ybWVkRW50cmllcy5sZW5ndGgsXG4gICAgICAgICAgICAgICAgbGltaXQ6IGxpbWl0TnVtLFxuICAgICAgICAgICAgICAgIG9mZnNldDogb2Zmc2V0TnVtLFxuICAgICAgICAgICAgICAgIGhhc01vcmU6IG9mZnNldE51bSArIGxpbWl0TnVtIDwgdHJhbnNmb3JtZWRFbnRyaWVzLmxlbmd0aFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSBjYXRjaCAoZGJFcnJvcikge1xuICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCfinYwgRGF0YWJhc2UgZXJyb3I6JywgZGJFcnJvcilcbiAgICAgICAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICAgICAgICAgIHsgZXJyb3I6ICdEYXRhYmFzZSBjb25uZWN0aW9uIGZhaWxlZCcsIGRldGFpbHM6IGRiRXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGRiRXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGRhdGFiYXNlIGVycm9yJyB9LFxuICAgICAgICAgICAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICB9XG5cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJztcbiAgICBjb25zb2xlLmVycm9yKCfinYwgRXJyb3IgZmV0Y2hpbmcgbW9vZCBlbnRyaWVzOicsIGVycm9yKVxuICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBFcnJvciBkZXRhaWxzOicsIHtcbiAgICAgIG1lc3NhZ2U6IGVycm9yTWVzc2FnZSxcbiAgICAgIHN0YWNrOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3Iuc3RhY2sgOiB1bmRlZmluZWQsXG4gICAgICBuYW1lOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubmFtZSA6ICdVbmtub3duJ1xuICAgIH0pXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBcbiAgICAgICAgc3VjY2VzczogZmFsc2UsIFxuICAgICAgICBlcnJvcjogeyBcbiAgICAgICAgICBjb2RlOiAnSU5URVJOQUxfRVJST1InLCBcbiAgICAgICAgICBtZXNzYWdlOiAnRmFpbGVkIHRvIGZldGNoIG1vb2QgZW50cmllcycsXG4gICAgICAgICAgZGV0YWlsczogZXJyb3JNZXNzYWdlXG4gICAgICAgIH0gXG4gICAgICB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKVxuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgYm9keSA9IGF3YWl0IHJlcXVlc3QuanNvbigpXG4gICAgXG4gICAgLy8gVmFsaWRhdGUgcmVxdWlyZWQgZmllbGRzXG4gICAgaWYgKCFib2R5LnJhdGluZyB8fCBib2R5LnJhdGluZyA8IDEgfHwgYm9keS5yYXRpbmcgPiAxMCkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IFxuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLCBcbiAgICAgICAgICBlcnJvcjogeyBcbiAgICAgICAgICAgIGNvZGU6ICdWQUxJREFUSU9OX0VSUk9SJywgXG4gICAgICAgICAgICBtZXNzYWdlOiAnUmF0aW5nIG11c3QgYmUgYmV0d2VlbiAxIGFuZCAxMCcgXG4gICAgICAgICAgfSBcbiAgICAgICAgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICApXG4gICAgfVxuXG4gICAgLy8gQ3JlYXRlIG1vb2QgZW50cnkgaW4gUG9zdGdyZVNRTCBkYXRhYmFzZVxuICAgIGNvbnN0IG5ld0VudHJ5ID0gYXdhaXQgZGIuY3JlYXRlTW9vZEVudHJ5KHtcbiAgICAgIHVzZXJfaWQ6ICdkZWZhdWx0LXVzZXInLFxuICAgICAgcmF0aW5nOiBib2R5LnJhdGluZyxcbiAgICAgIG5vdGVzOiBib2R5Lm5vdGVzIHx8IG51bGwsXG4gICAgICBlbnRyeV9kYXRlOiBib2R5LmVudHJ5RGF0ZSB8fCBnZXRUb2RheUxvY2FsKCksXG4gICAgICBzdGF0dXM6ICdhY3RpdmUnLFxuICAgICAgdGFnczogYm9keS50YWdzIHx8IFtdLFxuICAgICAgbWV0YWRhdGE6IGJvZHkubWV0YWRhdGEgfHwge31cbiAgICB9KVxuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKG5ld0VudHJ5LCB7IHN0YXR1czogMjAxIH0pXG5cbiAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIG1vb2QgZW50cnk6JywgZXJyb3IpXG4gICAgXG4gICAgLy8gSGFuZGxlIGR1cGxpY2F0ZSBrZXkgY29uc3RyYWludCAodXNlciBhbHJlYWR5IGhhcyBhbiBlbnRyeSBmb3IgdGhpcyBkYXRlKVxuICAgIGlmIChlcnJvci5jb2RlID09PSAnMjM1MDUnICYmIGVycm9yLmNvbnN0cmFpbnQgPT09ICdtb29kdHJhY2tlcl91c2VyX2lkX2VudHJ5X2RhdGVfa2V5Jykge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IFxuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLCBcbiAgICAgICAgICBlcnJvcjogeyBcbiAgICAgICAgICAgIGNvZGU6ICdEVVBMSUNBVEVfRU5UUlknLCBcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdZb3UgYWxyZWFkeSBoYXZlIGEgbW9vZCBlbnRyeSBmb3IgdGhpcyBkYXRlLiBQbGVhc2UgdXBkYXRlIHlvdXIgZXhpc3RpbmcgZW50cnkgaW5zdGVhZC4nIFxuICAgICAgICAgIH0gXG4gICAgICAgIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDkgfVxuICAgICAgKVxuICAgIH1cbiAgICBcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IFxuICAgICAgICBzdWNjZXNzOiBmYWxzZSwgXG4gICAgICAgIGVycm9yOiB7IFxuICAgICAgICAgIGNvZGU6ICdJTlRFUk5BTF9FUlJPUicsIFxuICAgICAgICAgIG1lc3NhZ2U6ICdGYWlsZWQgdG8gY3JlYXRlIG1vb2QgZW50cnknIFxuICAgICAgICB9IFxuICAgICAgfSxcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgIClcbiAgfVxufVxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsIlBvc3RncmVzQWRhcHRlciIsImdldFRvZGF5TG9jYWwiLCJkYiIsImdldEluc3RhbmNlIiwiR0VUIiwicmVxdWVzdCIsImNvbnNvbGUiLCJsb2ciLCJwcm9jZXNzIiwiZW52IiwiREFUQUJBU0VfVVJMIiwic2VhcmNoUGFyYW1zIiwiVVJMIiwidXJsIiwic3RhcnREYXRlIiwiZ2V0IiwiZW5kRGF0ZSIsImxpbWl0Iiwib2Zmc2V0IiwiZW50cmllcyIsImdldE1vb2RFbnRyaWVzQnlEYXRlUmFuZ2UiLCJnZXRBbGxNb29kRW50cmllcyIsInRyYW5zZm9ybWVkRW50cmllcyIsIm1hcCIsImVudHJ5IiwiZGF0ZSIsIkRhdGUiLCJlbnRyeV9kYXRlIiwieWVhciIsImdldEZ1bGxZZWFyIiwibW9udGgiLCJTdHJpbmciLCJnZXRNb250aCIsInBhZFN0YXJ0IiwiZGF5IiwiZ2V0RGF0ZSIsImVudHJ5RGF0ZSIsImlkIiwidG9TdHJpbmciLCJ1c2VySWQiLCJ1c2VyX2lkIiwicmF0aW5nIiwibm90ZXMiLCJjcmVhdGVkQXQiLCJjcmVhdGVkX2F0IiwidXBkYXRlZEF0IiwidXBkYXRlZF9hdCIsInN0YXR1cyIsInRhZ3MiLCJtZXRhZGF0YSIsImxpbWl0TnVtIiwicGFyc2VJbnQiLCJvZmZzZXROdW0iLCJwYWdpbmF0ZWRFbnRyaWVzIiwic2xpY2UiLCJqc29uIiwiZGF0YSIsInBhZ2luYXRpb24iLCJ0b3RhbCIsImxlbmd0aCIsImhhc01vcmUiLCJkYkVycm9yIiwiZXJyb3IiLCJkZXRhaWxzIiwiRXJyb3IiLCJtZXNzYWdlIiwiZXJyb3JNZXNzYWdlIiwic3RhY2siLCJ1bmRlZmluZWQiLCJuYW1lIiwic3VjY2VzcyIsImNvZGUiLCJQT1NUIiwiYm9keSIsIm5ld0VudHJ5IiwiY3JlYXRlTW9vZEVudHJ5IiwiY29uc3RyYWludCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/v1/mood-entries/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/api-storage/postgres-adapter.ts":
/*!*************************************************!*\
  !*** ./src/lib/api-storage/postgres-adapter.ts ***!
  \*************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var pg__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! pg */ \"pg\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([pg__WEBPACK_IMPORTED_MODULE_0__]);\npg__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n/**\n * PostgreSQL Adapter for API Routes\n * \n * This provides PostgreSQL database operations for the API routes.\n */ \nclass PostgresAdapter {\n    constructor(){\n        // For Vercel deployment, use DATABASE_URL if available, otherwise use individual env vars\n        const config = process.env.DATABASE_URL ? {\n            connectionString: process.env.DATABASE_URL,\n            ssl: {\n                rejectUnauthorized: false\n            }\n        } : {\n            host: process.env.POSTGRES_HOST || \"localhost\",\n            port: parseInt(process.env.POSTGRES_PORT || \"5432\"),\n            database: process.env.POSTGRES_DB || \"moodtracker\",\n            user: process.env.POSTGRES_USER || \"postgres\",\n            password: process.env.POSTGRES_PASSWORD || \"postgres\",\n            ssl: process.env.POSTGRES_SSL === \"true\" ? {\n                rejectUnauthorized: false\n            } : false\n        };\n        this.pool = new pg__WEBPACK_IMPORTED_MODULE_0__.Pool(config);\n    }\n    static getInstance() {\n        if (!PostgresAdapter.instance) {\n            PostgresAdapter.instance = new PostgresAdapter();\n        }\n        return PostgresAdapter.instance;\n    }\n    // Create a new mood entry\n    async createMoodEntry(entry) {\n        const client = await this.pool.connect();\n        try {\n            const query = `\n        INSERT INTO moodtracker (user_id, rating, notes, entry_date, status, tags, metadata)\n        VALUES ($1, $2, $3, $4, $5, $6, $7)\n        RETURNING id, user_id, rating, notes, entry_date, created_at, updated_at, status, tags, metadata\n      `;\n            const values = [\n                entry.user_id,\n                entry.rating,\n                entry.notes,\n                entry.entry_date,\n                entry.status,\n                entry.tags,\n                JSON.stringify(entry.metadata)\n            ];\n            const result = await client.query(query, values);\n            const row = result.rows[0];\n            return {\n                id: row.id,\n                user_id: row.user_id,\n                rating: row.rating,\n                notes: row.notes,\n                entry_date: row.entry_date,\n                created_at: row.created_at,\n                updated_at: row.updated_at,\n                status: row.status,\n                tags: row.tags || [],\n                metadata: row.metadata || {}\n            };\n        } finally{\n            client.release();\n        }\n    }\n    // Get a mood entry by ID\n    async getMoodEntry(id) {\n        const client = await this.pool.connect();\n        try {\n            const query = \"SELECT * FROM moodtracker WHERE id = $1\";\n            const result = await client.query(query, [\n                id\n            ]);\n            if (result.rows.length === 0) {\n                return undefined;\n            }\n            const row = result.rows[0];\n            return {\n                id: row.id,\n                user_id: row.user_id,\n                rating: row.rating,\n                notes: row.notes,\n                entry_date: row.entry_date,\n                created_at: row.created_at,\n                updated_at: row.updated_at,\n                status: row.status,\n                tags: row.tags || [],\n                metadata: row.metadata || {}\n            };\n        } finally{\n            client.release();\n        }\n    }\n    // Update a mood entry\n    async updateMoodEntry(id, updates) {\n        const client = await this.pool.connect();\n        try {\n            const setClause = [];\n            const values = [];\n            let paramCount = 1;\n            if (updates.rating !== undefined) {\n                setClause.push(`rating = $${paramCount++}`);\n                values.push(updates.rating);\n            }\n            if (updates.notes !== undefined) {\n                setClause.push(`notes = $${paramCount++}`);\n                values.push(updates.notes);\n            }\n            if (updates.entry_date !== undefined) {\n                setClause.push(`entry_date = $${paramCount++}`);\n                values.push(updates.entry_date);\n            }\n            if (updates.status !== undefined) {\n                setClause.push(`status = $${paramCount++}`);\n                values.push(updates.status);\n            }\n            if (updates.tags !== undefined) {\n                setClause.push(`tags = $${paramCount++}`);\n                values.push(updates.tags);\n            }\n            if (updates.metadata !== undefined) {\n                setClause.push(`metadata = $${paramCount++}`);\n                values.push(JSON.stringify(updates.metadata));\n            }\n            if (setClause.length === 0) {\n                return this.getMoodEntry(id);\n            }\n            setClause.push(`updated_at = CURRENT_TIMESTAMP`);\n            values.push(id);\n            const query = `\n        UPDATE moodtracker \n        SET ${setClause.join(\", \")}\n        WHERE id = $${paramCount}\n        RETURNING id, user_id, rating, notes, entry_date, created_at, updated_at, status, tags, metadata\n      `;\n            const result = await client.query(query, values);\n            if (result.rows.length === 0) {\n                return undefined;\n            }\n            const row = result.rows[0];\n            return {\n                id: row.id,\n                user_id: row.user_id,\n                rating: row.rating,\n                notes: row.notes,\n                entry_date: row.entry_date,\n                created_at: row.created_at,\n                updated_at: row.updated_at,\n                status: row.status,\n                tags: row.tags || [],\n                metadata: row.metadata || {}\n            };\n        } finally{\n            client.release();\n        }\n    }\n    // Delete a mood entry\n    async deleteMoodEntry(id) {\n        const client = await this.pool.connect();\n        try {\n            const query = \"DELETE FROM moodtracker WHERE id = $1\";\n            const result = await client.query(query, [\n                id\n            ]);\n            return (result.rowCount ?? 0) > 0;\n        } finally{\n            client.release();\n        }\n    }\n    // Get all mood entries for a user\n    async getAllMoodEntries(userId) {\n        const client = await this.pool.connect();\n        try {\n            const query = `\n        SELECT * FROM moodtracker \n        WHERE user_id = $1 \n        ORDER BY entry_date DESC\n      `;\n            const result = await client.query(query, [\n                userId\n            ]);\n            return result.rows.map((row)=>({\n                    id: row.id,\n                    user_id: row.user_id,\n                    rating: row.rating,\n                    notes: row.notes,\n                    entry_date: row.entry_date,\n                    created_at: row.created_at,\n                    updated_at: row.updated_at,\n                    status: row.status,\n                    tags: row.tags || [],\n                    metadata: row.metadata || {}\n                }));\n        } finally{\n            client.release();\n        }\n    }\n    // Get mood entries by date range for a user\n    async getMoodEntriesByDateRange(userId, startDate, endDate) {\n        const client = await this.pool.connect();\n        try {\n            const query = `\n        SELECT * FROM moodtracker \n        WHERE user_id = $1 AND entry_date >= $2 AND entry_date <= $3\n        ORDER BY entry_date DESC\n      `;\n            const result = await client.query(query, [\n                userId,\n                startDate,\n                endDate\n            ]);\n            return result.rows.map((row)=>({\n                    id: row.id,\n                    user_id: row.user_id,\n                    rating: row.rating,\n                    notes: row.notes,\n                    entry_date: row.entry_date,\n                    created_at: row.created_at,\n                    updated_at: row.updated_at,\n                    status: row.status,\n                    tags: row.tags || [],\n                    metadata: row.metadata || {}\n                }));\n        } finally{\n            client.release();\n        }\n    }\n    // Close the connection pool\n    async close() {\n        await this.pool.end();\n    }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (PostgresAdapter);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2FwaS1zdG9yYWdlL3Bvc3RncmVzLWFkYXB0ZXIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTs7OztDQUlDLEdBRXFDO0FBZXRDLE1BQU1DO0lBSUosYUFBc0I7UUFDcEIsMEZBQTBGO1FBQzFGLE1BQU1DLFNBQVNDLFFBQVFDLEdBQUcsQ0FBQ0MsWUFBWSxHQUNuQztZQUNFQyxrQkFBa0JILFFBQVFDLEdBQUcsQ0FBQ0MsWUFBWTtZQUMxQ0UsS0FBSztnQkFBRUMsb0JBQW9CO1lBQU07UUFDbkMsSUFDQTtZQUNFQyxNQUFNTixRQUFRQyxHQUFHLENBQUNNLGFBQWEsSUFBSTtZQUNuQ0MsTUFBTUMsU0FBU1QsUUFBUUMsR0FBRyxDQUFDUyxhQUFhLElBQUk7WUFDNUNDLFVBQVVYLFFBQVFDLEdBQUcsQ0FBQ1csV0FBVyxJQUFJO1lBQ3JDQyxNQUFNYixRQUFRQyxHQUFHLENBQUNhLGFBQWEsSUFBSTtZQUNuQ0MsVUFBVWYsUUFBUUMsR0FBRyxDQUFDZSxpQkFBaUIsSUFBSTtZQUMzQ1osS0FBS0osUUFBUUMsR0FBRyxDQUFDZ0IsWUFBWSxLQUFLLFNBQVM7Z0JBQUVaLG9CQUFvQjtZQUFNLElBQUk7UUFDN0U7UUFFSixJQUFJLENBQUNhLElBQUksR0FBRyxJQUFJckIsb0NBQUlBLENBQUNFO0lBQ3ZCO0lBRUEsT0FBT29CLGNBQStCO1FBQ3BDLElBQUksQ0FBQ3JCLGdCQUFnQnNCLFFBQVEsRUFBRTtZQUM3QnRCLGdCQUFnQnNCLFFBQVEsR0FBRyxJQUFJdEI7UUFDakM7UUFDQSxPQUFPQSxnQkFBZ0JzQixRQUFRO0lBQ2pDO0lBRUEsMEJBQTBCO0lBQzFCLE1BQU1DLGdCQUFnQkMsS0FBNkQsRUFBeUI7UUFDMUcsTUFBTUMsU0FBUyxNQUFNLElBQUksQ0FBQ0wsSUFBSSxDQUFDTSxPQUFPO1FBQ3RDLElBQUk7WUFDRixNQUFNQyxRQUFRLENBQUM7Ozs7TUFJZixDQUFDO1lBRUQsTUFBTUMsU0FBUztnQkFDYkosTUFBTUssT0FB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LE9BQU9tQixPQUFPO1FBQ2hCO0lBQ0Y7SUFFQSw0Q0FBNEM7SUFDNUMsTUFBTWUsMEJBQTBCRixNQUFjLEVBQUVHLFNBQWlCLEVBQUVDLE9BQWUsRUFBMkI7UUFDM0csTUFBTXBDLFNBQVMsTUFBTSxJQUFJLENBQUNMLElBQUksQ0FBQ00sT0FBTztRQUN0QyxJQUFJO1lBQ0YsTUFBTUMsUUFBUSxDQUFDOzs7O01BSWYsQ0FBQztZQUNELE1BQU1XLFNBQVMsTUFBTWIsT0FBT0UsS0FBSyxDQUFDQSxPQUFPO2dCQUFDOEI7Z0JBQVFHO2dCQUFXQzthQUFRO1lBRXJFLE9BQU92QixPQUFPRSxJQUFJLENBQUNrQixHQUFHLENBQUNuQixDQUFBQSxNQUFRO29CQUM3QkUsSUFBSUYsSUFBSUUsRUFBRTtvQkFDVlosU0FBU1UsSUFBSVYsT0FBTztvQkFDcEJDLFFBQVFTLElBQUlULE1BQU07b0JBQ2xCQyxPQUFPUSxJQUFJUixLQUFLO29CQUNoQkMsWUFBWU8sSUFBSVAsVUFBVTtvQkFDMUJVLFlBQVlILElBQUlHLFVBQVU7b0JBQzFCQyxZQUFZSixJQUFJSSxVQUFVO29CQUMxQlYsUUFBUU0sSUFBSU4sTUFBTTtvQkFDbEJDLE1BQU1LLElBQUlMLElBQUksSUFBSSxFQUFFO29CQUNwQkcsVUFBVUUsSUFBSUYsUUFBUSxJQUFJLENBQUM7Z0JBQzdCO1FBQ0YsU0FBVTtZQUNSWixPQUFPbUIsT0FBTztRQUNoQjtJQUNGO0lBRUEsNEJBQTRCO0lBQzVCLE1BQU1rQixRQUF1QjtRQUMzQixNQUFNLElBQUksQ0FBQzFDLElBQUksQ0FBQzJDLEdBQUc7SUFDckI7QUFDRjtBQUVBLGlFQUFlL0QsZUFBZUEsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL21vb2QtdHJhY2tlci8uL3NyYy9saWIvYXBpLXN0b3JhZ2UvcG9zdGdyZXMtYWRhcHRlci50cz85YWNlIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogUG9zdGdyZVNRTCBBZGFwdGVyIGZvciBBUEkgUm91dGVzXG4gKiBcbiAqIFRoaXMgcHJvdmlkZXMgUG9zdGdyZVNRTCBkYXRhYmFzZSBvcGVyYXRpb25zIGZvciB0aGUgQVBJIHJvdXRlcy5cbiAqL1xuXG5pbXBvcnQgeyBQb29sLCBQb29sQ2xpZW50IH0gZnJvbSAncGcnO1xuXG5pbnRlcmZhY2UgQXBpTW9vZEVudHJ5IHtcbiAgaWQ6IG51bWJlcjtcbiAgdXNlcl9pZDogc3RyaW5nO1xuICByYXRpbmc6IG51bWJlcjtcbiAgbm90ZXM6IHN0cmluZyB8IG51bGw7XG4gIGVudHJ5X2RhdGU6IHN0cmluZztcbiAgY3JlYXRlZF9hdDogc3RyaW5nO1xuICB1cGRhdGVkX2F0OiBzdHJpbmc7XG4gIHN0YXR1czogc3RyaW5nO1xuICB0YWdzOiBzdHJpbmdbXTtcbiAgbWV0YWRhdGE6IFJlY29yZDxzdHJpbmcsIGFueT47XG59XG5cbmNsYXNzIFBvc3RncmVzQWRhcHRlciB7XG4gIHByaXZhdGUgc3RhdGljIGluc3RhbmNlOiBQb3N0Z3Jlc0FkYXB0ZXI7XG4gIHByaXZhdGUgcG9vbDogUG9vbDtcblxuICBwcml2YXRlIGNvbnN0cnVjdG9yKCkge1xuICAgIC8vIEZvciBWZXJjZWwgZGVwbG95bWVudCwgdXNlIERBVEFCQVNFX1VSTCBpZiBhdmFpbGFibGUsIG90aGVyd2lzZSB1c2UgaW5kaXZpZHVhbCBlbnYgdmFyc1xuICAgIGNvbnN0IGNvbmZpZyA9IHByb2Nlc3MuZW52LkRBVEFCQVNFX1VSTCBcbiAgICAgID8ge1xuICAgICAgICAgIGNvbm5lY3Rpb25TdHJpbmc6IHByb2Nlc3MuZW52LkRBVEFCQVNFX1VSTCxcbiAgICAgICAgICBzc2w6IHsgcmVqZWN0VW5hdXRob3JpemVkOiBmYWxzZSB9XG4gICAgICAgIH1cbiAgICAgIDoge1xuICAgICAgICAgIGhvc3Q6IHByb2Nlc3MuZW52LlBPU1RHUkVTX0hPU1QgfHwgJ2xvY2FsaG9zdCcsXG4gICAgICAgICAgcG9ydDogcGFyc2VJbnQocHJvY2Vzcy5lbnYuUE9TVEdSRVNfUE9SVCB8fCAnNTQzMicpLFxuICAgICAgICAgIGRhdGFiYXNlOiBwcm9jZXNzLmVudi5QT1NUR1JFU19EQiB8fCAnbW9vZHRyYWNrZXInLFxuICAgICAgICAgIHVzZXI6IHByb2Nlc3MuZW52LlBPU1RHUkVTX1VTRVIgfHwgJ3Bvc3RncmVzJyxcbiAgICAgICAgICBwYXNzd29yZDogcHJvY2Vzcy5lbnYuUE9TVEdSRVNfUEFTU1dPUkQgfHwgJ3Bvc3RncmVzJyxcbiAgICAgICAgICBzc2w6IHByb2Nlc3MuZW52LlBPU1RHUkVTX1NTTCA9PT0gJ3RydWUnID8geyByZWplY3RVbmF1dGhvcml6ZWQ6IGZhbHNlIH0gOiBmYWxzZSxcbiAgICAgICAgfTtcblxuICAgIHRoaXMucG9vbCA9IG5ldyBQb29sKGNvbmZpZyk7XG4gIH1cblxuICBzdGF0aWMgZ2V0SW5zdGFuY2UoKTogUG9zdGdyZXNBZGFwdGVyIHtcbiAgICBpZiAoIVBvc3RncmVzQWRhcHRlci5pbnN0YW5jZSkge1xuICAgICAgUG9zdGdyZXNBZGFwdGVyLmluc3RhbmNlID0gbmV3IFBvc3RncmVzQWRhcHRlcigpO1xuICAgIH1cbiAgICByZXR1cm4gUG9zdGdyZXNBZGFwdGVyLmluc3RhbmNlO1xuICB9XG5cbiAgLy8gQ3JlYXRlIGEgbmV3IG1vb2QgZW50cnlcbiAgYXN5bmMgY3JlYXRlTW9vZEVudHJ5KGVudHJ5OiBPbWl0PEFwaU1vb2RFbnRyeSwgJ2lkJyB8ICdjcmVhdGVkX2F0JyB8ICd1cGRhdGVkX2F0Jz4pOiBQcm9taXNlPEFwaU1vb2RFbnRyeT4ge1xuICAgIGNvbnN0IGNsaWVudCA9IGF3YWl0IHRoaXMucG9vbC5jb25uZWN0KCk7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHF1ZXJ5ID0gYFxuICAgICAgICBJTlNFUlQgSU5UTyBtb29kdHJhY2tlciAodXNlcl9pZCwgcmF0aW5nLCBub3RlcywgZW50cnlfZGF0ZSwgc3RhdHVzLCB0YWdzLCBtZXRhZGF0YSlcbiAgICAgICAgVkFMVUVTICgkMSwgJDIsICQzLCAkNCwgJDUsICQ2LCAkNylcbiAgICAgICAgUkVUVVJOSU5HIGlkLCB1c2VyX2lkLCByYXRpbmcsIG5vdGVzLCBlbnRyeV9kYXRlLCBjcmVhdGVkX2F0LCB1cGRhdGVkX2F0LCBzdGF0dXMsIHRhZ3MsIG1ldGFkYXRhXG4gICAgICBgO1xuICAgICAgXG4gICAgICBjb25zdCB2YWx1ZXMgPSBbXG4gICAgICAgIGVudHJ5LnVzZXJfaWQsXG4gICAgICAgIGVudHJ5LnJhdGluZyxcbiAgICAgICAgZW50cnkubm90ZXMsXG4gICAgICAgIGVudHJ5LmVudHJ5X2RhdGUsXG4gICAgICAgIGVudHJ5LnN0YXR1cyxcbiAgICAgICAgZW50cnkudGFncyxcbiAgICAgICAgSlNPTi5zdHJpbmdpZnkoZW50cnkubWV0YWRhdGEpXG4gICAgICBdO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjbGllbnQucXVlcnkocXVlcnksIHZhbHVlcyk7XG4gICAgICBjb25zdCByb3cgPSByZXN1bHQucm93c1swXTtcbiAgICAgIFxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaWQ6IHJvdy5pZCxcbiAgICAgICAgdXNlcl9pZDogcm93LnVzZXJfaWQsXG4gICAgICAgIHJhdGluZzogcm93LnJhdGluZyxcbiAgICAgICAgbm90ZXM6IHJvdy5ub3RlcyxcbiAgICAgICAgZW50cnlfZGF0ZTogcm93LmVudHJ5X2RhdGUsXG4gICAgICAgIGNyZWF0ZWRfYXQ6IHJvdy5jcmVhdGVkX2F0LFxuICAgICAgICB1cGRhdGVkX2F0OiByb3cudXBkYXRlZF9hdCxcbiAgICAgICAgc3RhdHVzOiByb3cuc3RhdHVzLFxuICAgICAgICB0YWdzOiByb3cudGFncyB8fCBbXSxcbiAgICAgICAgbWV0YWRhdGE6IHJvdy5tZXRhZGF0YSB8fCB7fVxuICAgICAgfTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgY2xpZW50LnJlbGVhc2UoKTtcbiAgICB9XG4gIH1cblxuICAvLyBHZXQgYSBtb29kIGVudHJ5IGJ5IElEXG4gIGFzeW5jIGdldE1vb2RFbnRyeShpZDogbnVtYmVyKTogUHJvbWlzZTxBcGlNb29kRW50cnkgfCB1bmRlZmluZWQ+IHtcbiAgICBjb25zdCBjbGllbnQgPSBhd2FpdCB0aGlzLnBvb2wuY29ubmVjdCgpO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBxdWVyeSA9ICdTRUxFQ1QgKiBGUk9NIG1vb2R0cmFja2VyIFdIRVJFIGlkID0gJDEnO1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY2xpZW50LnF1ZXJ5KHF1ZXJ5LCBbaWRdKTtcbiAgICAgIFxuICAgICAgaWYgKHJlc3VsdC5yb3dzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zdCByb3cgPSByZXN1bHQucm93c1swXTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGlkOiByb3cuaWQsXG4gICAgICAgIHVzZXJfaWQ6IHJvdy51c2VyX2lkLFxuICAgICAgICByYXRpbmc6IHJvdy5yYXRpbmcsXG4gICAgICAgIG5vdGVzOiByb3cubm90ZXMsXG4gICAgICAgIGVudHJ5X2RhdGU6IHJvdy5lbnRyeV9kYXRlLFxuICAgICAgICBjcmVhdGVkX2F0OiByb3cuY3JlYXRlZF9hdCxcbiAgICAgICAgdXBkYXRlZF9hdDogcm93LnVwZGF0ZWRfYXQsXG4gICAgICAgIHN0YXR1czogcm93LnN0YXR1cyxcbiAgICAgICAgdGFnczogcm93LnRhZ3MgfHwgW10sXG4gICAgICAgIG1ldGFkYXRhOiByb3cubWV0YWRhdGEgfHwge31cbiAgICAgIH07XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIGNsaWVudC5yZWxlYXNlKCk7XG4gICAgfVxuICB9XG5cbiAgLy8gVXBkYXRlIGEgbW9vZCBlbnRyeVxuICBhc3luYyB1cGRhdGVNb29kRW50cnkoaWQ6IG51bWJlciwgdXBkYXRlczogUGFydGlhbDxBcGlNb29kRW50cnk+KTogUHJvbWlzZTxBcGlNb29kRW50cnkgfCB1bmRlZmluZWQ+IHtcbiAgICBjb25zdCBjbGllbnQgPSBhd2FpdCB0aGlzLnBvb2wuY29ubmVjdCgpO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBzZXRDbGF1c2UgPSBbXTtcbiAgICAgIGNvbnN0IHZhbHVlcyA9IFtdO1xuICAgICAgbGV0IHBhcmFtQ291bnQgPSAxO1xuXG4gICAgICBpZiAodXBkYXRlcy5yYXRpbmcgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBzZXRDbGF1c2UucHVzaChgcmF0aW5nID0gJCR7cGFyYW1Db3VudCsrfWApO1xuICAgICAgICB2YWx1ZXMucHVzaCh1cGRhdGVzLnJhdGluZyk7XG4gICAgICB9XG4gICAgICBpZiAodXBkYXRlcy5ub3RlcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHNldENsYXVzZS5wdXNoKGBub3RlcyA9ICQke3BhcmFtQ291bnQrK31gKTtcbiAgICAgICAgdmFsdWVzLnB1c2godXBkYXRlcy5ub3Rlcyk7XG4gICAgICB9XG4gICAgICBpZiAodXBkYXRlcy5lbnRyeV9kYXRlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgc2V0Q2xhdXNlLnB1c2goYGVudHJ5X2RhdGUgPSAkJHtwYXJhbUNvdW50Kyt9YCk7XG4gICAgICAgIHZhbHVlcy5wdXNoKHVwZGF0ZXMuZW50cnlfZGF0ZSk7XG4gICAgICB9XG4gICAgICBpZiAodXBkYXRlcy5zdGF0dXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBzZXRDbGF1c2UucHVzaChgc3RhdHVzID0gJCR7cGFyYW1Db3VudCsrfWApO1xuICAgICAgICB2YWx1ZXMucHVzaCh1cGRhdGVzLnN0YXR1cyk7XG4gICAgICB9XG4gICAgICBpZiAodXBkYXRlcy50YWdzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgc2V0Q2xhdXNlLnB1c2goYHRhZ3MgPSAkJHtwYXJhbUNvdW50Kyt9YCk7XG4gICAgICAgIHZhbHVlcy5wdXNoKHVwZGF0ZXMudGFncyk7XG4gICAgICB9XG4gICAgICBpZiAodXBkYXRlcy5tZXRhZGF0YSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHNldENsYXVzZS5wdXNoKGBtZXRhZGF0YSA9ICQke3BhcmFtQ291bnQrK31gKTtcbiAgICAgICAgdmFsdWVzLnB1c2goSlNPTi5zdHJpbmdpZnkodXBkYXRlcy5tZXRhZGF0YSkpO1xuICAgICAgfVxuXG4gICAgICBpZiAoc2V0Q2xhdXNlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRNb29kRW50cnkoaWQpO1xuICAgICAgfVxuXG4gICAgICBzZXRDbGF1c2UucHVzaChgdXBkYXRlZF9hdCA9IENVUlJFTlRfVElNRVNUQU1QYCk7XG4gICAgICB2YWx1ZXMucHVzaChpZCk7XG5cbiAgICAgIGNvbnN0IHF1ZXJ5ID0gYFxuICAgICAgICBVUERBVEUgbW9vZHRyYWNrZXIgXG4gICAgICAgIFNFVCAke3NldENsYXVzZS5qb2luKCcsICcpfVxuICAgICAgICBXSEVSRSBpZCA9ICQke3BhcmFtQ291bnR9XG4gICAgICAgIFJFVFVSTklORyBpZCwgdXNlcl9pZCwgcmF0aW5nLCBub3RlcywgZW50cnlfZGF0ZSwgY3JlYXRlZF9hdCwgdXBkYXRlZF9hdCwgc3RhdHVzLCB0YWdzLCBtZXRhZGF0YVxuICAgICAgYDtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY2xpZW50LnF1ZXJ5KHF1ZXJ5LCB2YWx1ZXMpO1xuICAgICAgXG4gICAgICBpZiAocmVzdWx0LnJvd3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnN0IHJvdyA9IHJlc3VsdC5yb3dzWzBdO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaWQ6IHJvdy5pZCxcbiAgICAgICAgdXNlcl9pZDogcm93LnVzZXJfaWQsXG4gICAgICAgIHJhdGluZzogcm93LnJhdGluZyxcbiAgICAgICAgbm90ZXM6IHJvdy5ub3RlcyxcbiAgICAgICAgZW50cnlfZGF0ZTogcm93LmVudHJ5X2RhdGUsXG4gICAgICAgIGNyZWF0ZWRfYXQ6IHJvdy5jcmVhdGVkX2F0LFxuICAgICAgICB1cGRhdGVkX2F0OiByb3cudXBkYXRlZF9hdCxcbiAgICAgICAgc3RhdHVzOiByb3cuc3RhdHVzLFxuICAgICAgICB0YWdzOiByb3cudGFncyB8fCBbXSxcbiAgICAgICAgbWV0YWRhdGE6IHJvdy5tZXRhZGF0YSB8fCB7fVxuICAgICAgfTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgY2xpZW50LnJlbGVhc2UoKTtcbiAgICB9XG4gIH1cblxuICAvLyBEZWxldGUgYSBtb29kIGVudHJ5XG4gIGFzeW5jIGRlbGV0ZU1vb2RFbnRyeShpZDogbnVtYmVyKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgY29uc3QgY2xpZW50ID0gYXdhaXQgdGhpcy5wb29sLmNvbm5lY3QoKTtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcXVlcnkgPSAnREVMRVRFIEZST00gbW9vZHRyYWNrZXIgV0hFUkUgaWQgPSAkMSc7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjbGllbnQucXVlcnkocXVlcnksIFtpZF0pO1xuICAgICAgcmV0dXJuIChyZXN1bHQucm93Q291bnQgPz8gMCkgPiAwO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBjbGllbnQucmVsZWFzZSgpO1xuICAgIH1cbiAgfVxuXG4gIC8vIEdldCBhbGwgbW9vZCBlbnRyaWVzIGZvciBhIHVzZXJcbiAgYXN5bmMgZ2V0QWxsTW9vZEVudHJpZXModXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPEFwaU1vb2RFbnRyeVtdPiB7XG4gICAgY29uc3QgY2xpZW50ID0gYXdhaXQgdGhpcy5wb29sLmNvbm5lY3QoKTtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcXVlcnkgPSBgXG4gICAgICAgIFNFTEVDVCAqIEZST00gbW9vZHRyYWNrZXIgXG4gICAgICAgIFdIRVJFIHVzZXJfaWQgPSAkMSBcbiAgICAgICAgT1JERVIgQlkgZW50cnlfZGF0ZSBERVNDXG4gICAgICBgO1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY2xpZW50LnF1ZXJ5KHF1ZXJ5LCBbdXNlcklkXSk7XG4gICAgICBcbiAgICAgIHJldHVybiByZXN1bHQucm93cy5tYXAocm93ID0+ICh7XG4gICAgICAgIGlkOiByb3cuaWQsXG4gICAgICAgIHVzZXJfaWQ6IHJvdy51c2VyX2lkLFxuICAgICAgICByYXRpbmc6IHJvdy5yYXRpbmcsXG4gICAgICAgIG5vdGVzOiByb3cubm90ZXMsXG4gICAgICAgIGVudHJ5X2RhdGU6IHJvdy5lbnRyeV9kYXRlLFxuICAgICAgICBjcmVhdGVkX2F0OiByb3cuY3JlYXRlZF9hdCxcbiAgICAgICAgdXBkYXRlZF9hdDogcm93LnVwZGF0ZWRfYXQsXG4gICAgICAgIHN0YXR1czogcm93LnN0YXR1cyxcbiAgICAgICAgdGFnczogcm93LnRhZ3MgfHwgW10sXG4gICAgICAgIG1ldGFkYXRhOiByb3cubWV0YWRhdGEgfHwge31cbiAgICAgIH0pKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgY2xpZW50LnJlbGVhc2UoKTtcbiAgICB9XG4gIH1cblxuICAvLyBHZXQgbW9vZCBlbnRyaWVzIGJ5IGRhdGUgcmFuZ2UgZm9yIGEgdXNlclxuICBhc3luYyBnZXRNb29kRW50cmllc0J5RGF0ZVJhbmdlKHVzZXJJZDogc3RyaW5nLCBzdGFydERhdGU6IHN0cmluZywgZW5kRGF0ZTogc3RyaW5nKTogUHJvbWlzZTxBcGlNb29kRW50cnlbXT4ge1xuICAgIGNvbnN0IGNsaWVudCA9IGF3YWl0IHRoaXMucG9vbC5jb25uZWN0KCk7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHF1ZXJ5ID0gYFxuICAgICAgICBTRUxFQ1QgKiBGUk9NIG1vb2R0cmFja2VyIFxuICAgICAgICBXSEVSRSB1c2VyX2lkID0gJDEgQU5EIGVudHJ5X2RhdGUgPj0gJDIgQU5EIGVudHJ5X2RhdGUgPD0gJDNcbiAgICAgICAgT1JERVIgQlkgZW50cnlfZGF0ZSBERVNDXG4gICAgICBgO1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY2xpZW50LnF1ZXJ5KHF1ZXJ5LCBbdXNlcklkLCBzdGFydERhdGUsIGVuZERhdGVdKTtcbiAgICAgIFxuICAgICAgcmV0dXJuIHJlc3VsdC5yb3dzLm1hcChyb3cgPT4gKHtcbiAgICAgICAgaWQ6IHJvdy5pZCxcbiAgICAgICAgdXNlcl9pZDogcm93LnVzZXJfaWQsXG4gICAgICAgIHJhdGluZzogcm93LnJhdGluZyxcbiAgICAgICAgbm90ZXM6IHJvdy5ub3RlcyxcbiAgICAgICAgZW50cnlfZGF0ZTogcm93LmVudHJ5X2RhdGUsXG4gICAgICAgIGNyZWF0ZWRfYXQ6IHJvdy5jcmVhdGVkX2F0LFxuICAgICAgICB1cGRhdGVkX2F0OiByb3cudXBkYXRlZF9hdCxcbiAgICAgICAgc3RhdHVzOiByb3cuc3RhdHVzLFxuICAgICAgICB0YWdzOiByb3cudGFncyB8fCBbXSxcbiAgICAgICAgbWV0YWRhdGE6IHJvdy5tZXRhZGF0YSB8fCB7fVxuICAgICAgfSkpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBjbGllbnQucmVsZWFzZSgpO1xuICAgIH1cbiAgfVxuXG4gIC8vIENsb3NlIHRoZSBjb25uZWN0aW9uIHBvb2xcbiAgYXN5bmMgY2xvc2UoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgYXdhaXQgdGhpcy5wb29sLmVuZCgpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFBvc3RncmVzQWRhcHRlcjtcbiJdLCJuYW1lcyI6WyJQb29sIiwiUG9zdGdyZXNBZGFwdGVyIiwiY29uZmlnIiwicHJvY2VzcyIsImVudiIsIkRBVEFCQVNFX1VSTCIsImNvbm5lY3Rpb25TdHJpbmciLCJzc2wiLCJyZWplY3RVbmF1dGhvcml6ZWQiLCJob3N0IiwiUE9TVEdSRVNfSE9TVCIsInBvcnQiLCJwYXJzZUludCIsIlBPU1RHUkVTX1BPUlQiLCJkYXRhYmFzZSIsIlBPU1RHUkVTX0RCIiwidXNlciIsIlBPU1RHUkVTX1VTRVIiLCJwYXNzd29yZCIsIlBPU1RHUkVTX1BBU1NXT1JEIiwiUE9TVEdSRVNfU1NMIiwicG9vbCIsImdldEluc3RhbmNlIiwiaW5zdGFuY2UiLCJjcmVhdGVNb29kRW50cnkiLCJlbnRyeSIsImNsaWVudCIsImNvbm5lY3QiLCJxdWVyeSIsInZhbHVlcyIsInVzZXJfaWQiLCJyYXRpbmciLCJub3RlcyIsImVudHJ5X2RhdGUiLCJzdGF0dXMiLCJ0YWdzIiwiSlNPTiIsInN0cmluZ2lmeSIsIm1ldGFkYXRhIiwicmVzdWx0Iiwicm93Iiwicm93cyIsImlkIiwiY3JlYXRlZF9hdCIsInVwZGF0ZWRfYXQiLCJyZWxlYXNlIiwiZ2V0TW9vZEVudHJ5IiwibGVuZ3RoIiwidW5kZWZpbmVkIiwidXBkYXRlTW9vZEVudHJ5IiwidXBkYXRlcyIsInNldENsYXVzZSIsInBhcmFtQ291bnQiLCJwdXNoIiwiam9pbiIsImRlbGV0ZU1vb2RFbnRyeSIsInJvd0NvdW50IiwiZ2V0QWxsTW9vZEVudHJpZXMiLCJ1c2VySWQiLCJtYXAiLCJnZXRNb29kRW50cmllc0J5RGF0ZVJhbmdlIiwic3RhcnREYXRlIiwiZW5kRGF0ZSIsImNsb3NlIiwiZW5kIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/api-storage/postgres-adapter.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/utils/dateUtils.ts":
/*!************************************!*\
  !*** ./src/lib/utils/dateUtils.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   formatDateLocal: () => (/* binding */ formatDateLocal),\n/* harmony export */   getDateRangeLocal: () => (/* binding */ getDateRangeLocal),\n/* harmony export */   getTodayLocal: () => (/* binding */ getTodayLocal),\n/* harmony export */   isTodayLocal: () => (/* binding */ isTodayLocal)\n/* harmony export */ });\n/**\n * Date utility functions for timezone-aware date handling\n */ /**\n * Get today's date in YYYY-MM-DD format using local timezone\n * This ensures the date matches what the user sees in their timezone\n */ function getTodayLocal() {\n    const now = new Date();\n    const year = now.getFullYear();\n    const month = String(now.getMonth() + 1).padStart(2, \"0\");\n    const day = String(now.getDate()).padStart(2, \"0\");\n    return `${year}-${month}-${day}`;\n}\n/**\n * Get a date in YYYY-MM-DD format using local timezone\n * @param date - Date object or date string\n */ function formatDateLocal(date) {\n    const d = new Date(date);\n    const year = d.getFullYear();\n    const month = String(d.getMonth() + 1).padStart(2, \"0\");\n    const day = String(d.getDate()).padStart(2, \"0\");\n    return `${year}-${month}-${day}`;\n}\n/**\n * Get a date range for the last N days using local timezone\n * @param days - Number of days to go back\n */ function getDateRangeLocal(days) {\n    const endDate = new Date();\n    const startDate = new Date();\n    startDate.setDate(endDate.getDate() - days);\n    return {\n        startDate: formatDateLocal(startDate),\n        endDate: formatDateLocal(endDate)\n    };\n}\n/**\n * Check if a date is today using local timezone\n * @param dateString - Date string in YYYY-MM-DD format\n */ function isTodayLocal(dateString) {\n    return dateString === getTodayLocal();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3V0aWxzL2RhdGVVdGlscy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0NBRUMsR0FFRDs7O0NBR0MsR0FDTSxTQUFTQTtJQUNkLE1BQU1DLE1BQU0sSUFBSUM7SUFDaEIsTUFBTUMsT0FBT0YsSUFBSUcsV0FBVztJQUM1QixNQUFNQyxRQUFRQyxPQUFPTCxJQUFJTSxRQUFRLEtBQUssR0FBR0MsUUFBUSxDQUFDLEdBQUc7SUFDckQsTUFBTUMsTUFBTUgsT0FBT0wsSUFBSVMsT0FBTyxJQUFJRixRQUFRLENBQUMsR0FBRztJQUM5QyxPQUFPLENBQUMsRUFBRUwsS0FBSyxDQUFDLEVBQUVFLE1BQU0sQ0FBQyxFQUFFSSxJQUFJLENBQUM7QUFDbEM7QUFFQTs7O0NBR0MsR0FDTSxTQUFTRSxnQkFBZ0JDLElBQW1CO0lBQ2pELE1BQU1DLElBQUksSUFBSVgsS0FBS1U7SUFDbkIsTUFBTVQsT0FBT1UsRUFBRVQsV0FBVztJQUMxQixNQUFNQyxRQUFRQyxPQUFPTyxFQUFFTixRQUFRLEtBQUssR0FBR0MsUUFBUSxDQUFDLEdBQUc7SUFDbkQsTUFBTUMsTUFBTUgsT0FBT08sRUFBRUgsT0FBTyxJQUFJRixRQUFRLENBQUMsR0FBRztJQUM1QyxPQUFPLENBQUMsRUFBRUwsS0FBSyxDQUFDLEVBQUVFLE1BQU0sQ0FBQyxFQUFFSSxJQUFJLENBQUM7QUFDbEM7QUFFQTs7O0NBR0MsR0FDTSxTQUFTSyxrQkFBa0JDLElBQVk7SUFDNUMsTUFBTUMsVUFBVSxJQUFJZDtJQUNwQixNQUFNZSxZQUFZLElBQUlmO0lBQ3RCZSxVQUFVQyxPQUFPLENBQUNGLFFBQVFOLE9BQU8sS0FBS0s7SUFFdEMsT0FBTztRQUNMRSxXQUFXTixnQkFBZ0JNO1FBQzNCRCxTQUFTTCxnQkFBZ0JLO0lBQzNCO0FBQ0Y7QUFFQTs7O0NBR0MsR0FDTSxTQUFTRyxhQUFhQyxVQUFrQjtJQUM3QyxPQUFPQSxlQUFlcEI7QUFDeEIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tb29kLXRyYWNrZXIvLi9zcmMvbGliL3V0aWxzL2RhdGVVdGlscy50cz8wZDQzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogRGF0ZSB1dGlsaXR5IGZ1bmN0aW9ucyBmb3IgdGltZXpvbmUtYXdhcmUgZGF0ZSBoYW5kbGluZ1xuICovXG5cbi8qKlxuICogR2V0IHRvZGF5J3MgZGF0ZSBpbiBZWVlZLU1NLUREIGZvcm1hdCB1c2luZyBsb2NhbCB0aW1lem9uZVxuICogVGhpcyBlbnN1cmVzIHRoZSBkYXRlIG1hdGNoZXMgd2hhdCB0aGUgdXNlciBzZWVzIGluIHRoZWlyIHRpbWV6b25lXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRUb2RheUxvY2FsKCk6IHN0cmluZyB7XG4gIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gIGNvbnN0IHllYXIgPSBub3cuZ2V0RnVsbFllYXIoKTtcbiAgY29uc3QgbW9udGggPSBTdHJpbmcobm93LmdldE1vbnRoKCkgKyAxKS5wYWRTdGFydCgyLCAnMCcpO1xuICBjb25zdCBkYXkgPSBTdHJpbmcobm93LmdldERhdGUoKSkucGFkU3RhcnQoMiwgJzAnKTtcbiAgcmV0dXJuIGAke3llYXJ9LSR7bW9udGh9LSR7ZGF5fWA7XG59XG5cbi8qKlxuICogR2V0IGEgZGF0ZSBpbiBZWVlZLU1NLUREIGZvcm1hdCB1c2luZyBsb2NhbCB0aW1lem9uZVxuICogQHBhcmFtIGRhdGUgLSBEYXRlIG9iamVjdCBvciBkYXRlIHN0cmluZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0RGF0ZUxvY2FsKGRhdGU6IERhdGUgfCBzdHJpbmcpOiBzdHJpbmcge1xuICBjb25zdCBkID0gbmV3IERhdGUoZGF0ZSk7XG4gIGNvbnN0IHllYXIgPSBkLmdldEZ1bGxZZWFyKCk7XG4gIGNvbnN0IG1vbnRoID0gU3RyaW5nKGQuZ2V0TW9udGgoKSArIDEpLnBhZFN0YXJ0KDIsICcwJyk7XG4gIGNvbnN0IGRheSA9IFN0cmluZyhkLmdldERhdGUoKSkucGFkU3RhcnQoMiwgJzAnKTtcbiAgcmV0dXJuIGAke3llYXJ9LSR7bW9udGh9LSR7ZGF5fWA7XG59XG5cbi8qKlxuICogR2V0IGEgZGF0ZSByYW5nZSBmb3IgdGhlIGxhc3QgTiBkYXlzIHVzaW5nIGxvY2FsIHRpbWV6b25lXG4gKiBAcGFyYW0gZGF5cyAtIE51bWJlciBvZiBkYXlzIHRvIGdvIGJhY2tcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldERhdGVSYW5nZUxvY2FsKGRheXM6IG51bWJlcik6IHsgc3RhcnREYXRlOiBzdHJpbmc7IGVuZERhdGU6IHN0cmluZyB9IHtcbiAgY29uc3QgZW5kRGF0ZSA9IG5ldyBEYXRlKCk7XG4gIGNvbnN0IHN0YXJ0RGF0ZSA9IG5ldyBEYXRlKCk7XG4gIHN0YXJ0RGF0ZS5zZXREYXRlKGVuZERhdGUuZ2V0RGF0ZSgpIC0gZGF5cyk7XG4gIFxuICByZXR1cm4ge1xuICAgIHN0YXJ0RGF0ZTogZm9ybWF0RGF0ZUxvY2FsKHN0YXJ0RGF0ZSksXG4gICAgZW5kRGF0ZTogZm9ybWF0RGF0ZUxvY2FsKGVuZERhdGUpXG4gIH07XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgYSBkYXRlIGlzIHRvZGF5IHVzaW5nIGxvY2FsIHRpbWV6b25lXG4gKiBAcGFyYW0gZGF0ZVN0cmluZyAtIERhdGUgc3RyaW5nIGluIFlZWVktTU0tREQgZm9ybWF0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1RvZGF5TG9jYWwoZGF0ZVN0cmluZzogc3RyaW5nKTogYm9vbGVhbiB7XG4gIHJldHVybiBkYXRlU3RyaW5nID09PSBnZXRUb2RheUxvY2FsKCk7XG59XG4iXSwibmFtZXMiOlsiZ2V0VG9kYXlMb2NhbCIsIm5vdyIsIkRhdGUiLCJ5ZWFyIiwiZ2V0RnVsbFllYXIiLCJtb250aCIsIlN0cmluZyIsImdldE1vbnRoIiwicGFkU3RhcnQiLCJkYXkiLCJnZXREYXRlIiwiZm9ybWF0RGF0ZUxvY2FsIiwiZGF0ZSIsImQiLCJnZXREYXRlUmFuZ2VMb2NhbCIsImRheXMiLCJlbmREYXRlIiwic3RhcnREYXRlIiwic2V0RGF0ZSIsImlzVG9kYXlMb2NhbCIsImRhdGVTdHJpbmciXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/utils/dateUtils.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fv1%2Fmood-entries%2Froute&page=%2Fapi%2Fv1%2Fmood-entries%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fv1%2Fmood-entries%2Froute.ts&appDir=%2FUsers%2Fasimsinanyuksel%2FDesktop%2FMoodTracker%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fasimsinanyuksel%2FDesktop%2FMoodTracker&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();