(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[527],{2696:function(e,r,t){Promise.resolve().then(t.bind(t,7577))},7577:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return x}});var a=t(7437),s=t(2265),n=t(949),i=t(3196),o=t(7648),d=t(9376),l=t(5725),c=t(3481);function x(){let{user:e}=(0,n.aC)(),r=(0,d.useParams)(),t=(0,d.useRouter)(),x=null==r?void 0:r.id,[h,u]=(0,s.useState)(null),[m,g]=(0,s.useState)(!0),[p,b]=(0,s.useState)(!1),[k,v]=(0,s.useState)(""),[f,y]=(0,s.useState)(!1),[j,w]=(0,s.useState)(!1),[N,L]=(0,s.useState)({title:"",description:"",startDate:"",endDate:"",capacity:100,isPublic:!0}),D=new i.P;(0,s.useEffect)(()=>{x&&C()},[x]);let C=async()=>{try{g(!0);let r=await D.getEventById(x);if(r){u(r);let t=(null==e?void 0:e.id)===r.organizerId;if(w(t),!t){v("You do not have permission to edit this event");return}L({title:r.title,description:r.description,startDate:r.startDate.split("T")[0]+"T"+r.startDate.split("T")[1].substring(0,5),endDate:r.endDate.split("T")[0]+"T"+r.endDate.split("T")[1].substring(0,5),capacity:r.capacity,isPublic:r.isPublic})}else v("Event not found")}catch(e){v("Failed to load event")}finally{g(!1)}},E=async r=>{if(r.preventDefault(),h&&e)try{b(!0),v("");let r={title:N.title,description:N.description,startDate:new Date(N.startDate).toISOString(),endDate:new Date(N.endDate).toISOString(),capacity:N.capacity,isPublic:N.isPublic,metadata:h.metadata};await D.updateEvent(x,r,e.id),y(!0),setTimeout(()=>{t.push("/events/".concat(x))},2e3)}catch(e){v("Failed to update event")}finally{b(!1)}},M=e=>{let{name:r,value:t,type:a}=e.target;L(s=>({...s,[r]:"checkbox"===a?e.target.checked:"number"===a?parseInt(t)||0:t}))};return e?m?(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50 to-indigo-100 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(l.TK,{}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mt-4",children:"Loading event..."})]})}):k||!h?(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-red-50 to-pink-100 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 flex items-center justify-center",children:(0,a.jsx)(l.Uo,{children:(0,a.jsxs)(l.Zb,{className:"p-12 max-w-md text-center bg-white dark:bg-gray-800 shadow-xl border-0",children:[(0,a.jsx)("div",{className:"text-red-500 mb-6",children:(0,a.jsx)("svg",{className:"mx-auto h-16 w-16",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:k.includes("permission")?"Access Denied":"Event Not Found"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-8",children:k||"The event you're trying to edit doesn't exist."}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,a.jsx)(o.default,{href:"/events",children:(0,a.jsxs)(l.zx,{className:"bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 shadow-lg hover:shadow-xl transition-all duration-300",children:[(0,a.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),"Back to Events"]})}),h&&(0,a.jsx)(o.default,{href:"/events/".concat(x),children:(0,a.jsxs)(l.zx,{variant:"outline",className:"bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600 transition-all duration-300",children:[(0,a.jsxs)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"View Event"]})})]})]})})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50 to-indigo-100 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900",children:[(0,a.jsx)("div",{className:"fixed top-4 right-4 z-50",children:(0,a.jsx)(c.Tl,{showLabel:!1,className:"shadow-lg"})}),(0,a.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[(0,a.jsx)(l.Uo,{delay:0,children:(0,a.jsxs)("div",{className:"mb-12",children:[(0,a.jsxs)(o.default,{href:"/events/".concat(x),className:"group flex items-center text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 transition-colors duration-300 mb-4",children:[(0,a.jsx)("svg",{className:"w-5 h-5 mr-2 group-hover:-translate-x-1 transition-transform duration-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to Event"]}),(0,a.jsx)("h1",{className:"text-4xl md:text-5xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent dark:from-purple-400 dark:to-pink-400 mb-4",children:"Edit Event"}),(0,a.jsx)("p",{className:"text-xl text-gray-600 dark:text-gray-400",children:"Update your event details"})]})}),f&&(0,a.jsx)(l.oX,{delay:100,direction:"down",children:(0,a.jsxs)("div",{className:"mb-8 p-6 bg-green-50 dark:bg-green-900 border border-green-200 dark:border-green-700 text-green-600 dark:text-green-400 rounded-xl shadow-sm",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("svg",{className:"w-5 h-5 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,a.jsx)("span",{className:"font-semibold",children:"Event Updated!"})]}),(0,a.jsx)("p",{className:"text-sm mt-2",children:"Your event has been successfully updated. Redirecting to event page..."})]})}),k&&(0,a.jsx)(l.oX,{delay:100,direction:"down",children:(0,a.jsxs)("div",{className:"mb-8 p-6 bg-red-50 dark:bg-red-900 border border-red-200 dark:border-red-700 text-red-600 dark:text-red-400 rounded-xl shadow-sm",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("svg",{className:"w-5 h-5 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),(0,a.jsx)("span",{className:"font-semibold",children:"Error"})]}),(0,a.jsx)("p",{className:"text-sm mt-2",children:k})]})}),(0,a.jsx)(l.oX,{delay:200,direction:"up",children:(0,a.jsxs)(l.Zb,{className:"group relative overflow-hidden bg-white dark:bg-gray-800 shadow-xl hover:shadow-2xl transition-all duration-500 border-0",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-50 to-pink-50 dark:from-gray-700 dark:to-gray-600 opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),(0,a.jsx)("div",{className:"relative p-8",children:(0,a.jsxs)("form",{onSubmit:E,className:"space-y-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"title",className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3 uppercase tracking-wide",children:"Event Title *"}),(0,a.jsx)("input",{type:"text",id:"title",name:"title",required:!0,value:N.title,onChange:M,className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white transition-all duration-300",placeholder:"Enter event title"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"description",className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3 uppercase tracking-wide",children:"Description *"}),(0,a.jsx)("textarea",{id:"description",name:"description",required:!0,rows:4,value:N.description,onChange:M,className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white transition-all duration-300 resize-none",placeholder:"Describe your event"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"startDate",className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3 uppercase tracking-wide",children:"Start Date & Time *"}),(0,a.jsx)("input",{type:"datetime-local",id:"startDate",name:"startDate",required:!0,value:N.startDate,onChange:M,className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white transition-all duration-300"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"endDate",className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3 uppercase tracking-wide",children:"End Date & Time *"}),(0,a.jsx)("input",{type:"datetime-local",id:"endDate",name:"endDate",required:!0,value:N.endDate,onChange:M,className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white transition-all duration-300"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"capacity",className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3 uppercase tracking-wide",children:"Capacity *"}),(0,a.jsx)("input",{type:"number",id:"capacity",name:"capacity",required:!0,min:"1",value:N.capacity,onChange:M,className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white transition-all duration-300",placeholder:"Maximum number of attendees"})]}),(0,a.jsxs)("div",{className:"flex items-center p-4 bg-gray-50 dark:bg-gray-700 rounded-xl",children:[(0,a.jsx)("input",{type:"checkbox",id:"isPublic",name:"isPublic",checked:N.isPublic,onChange:M,className:"h-5 w-5 text-purple-600 focus:ring-purple-500 border-gray-300 rounded transition-colors duration-300"}),(0,a.jsx)("label",{htmlFor:"isPublic",className:"ml-3 block text-sm font-semibold text-gray-700 dark:text-gray-300",children:"Make this event public"})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 pt-6",children:[(0,a.jsx)(o.default,{href:"/events/".concat(x),children:(0,a.jsx)(l.zx,{type:"button",variant:"outline",className:"w-full bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600 transition-all duration-300 px-8 py-4 rounded-xl font-semibold",children:(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),(0,a.jsx)("span",{children:"Cancel"})]})})}),(0,a.jsx)("button",{type:"submit",disabled:p,className:"flex-1 group relative overflow-hidden bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 disabled:from-gray-400 disabled:to-gray-500 text-white px-8 py-4 rounded-xl shadow-lg hover:shadow-xl disabled:shadow-none transition-all duration-300 transform hover:-translate-y-1 disabled:transform-none disabled:cursor-not-allowed font-semibold",children:(0,a.jsx)("div",{className:"flex items-center justify-center space-x-2",children:p?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,a.jsx)("span",{children:"Saving..."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,a.jsx)("span",{children:"Save Changes"})]})})})]})]})})]})})]})]}):(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-red-50 to-pink-100 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 flex items-center justify-center",children:(0,a.jsx)(l.Uo,{children:(0,a.jsxs)(l.Zb,{className:"p-12 max-w-md text-center bg-white dark:bg-gray-800 shadow-xl border-0",children:[(0,a.jsx)("div",{className:"text-red-500 mb-6",children:(0,a.jsx)("svg",{className:"mx-auto h-16 w-16",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Sign In Required"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-8",children:"You must be signed in to edit events."}),(0,a.jsx)(o.default,{href:"/signin",children:(0,a.jsxs)(l.zx,{className:"bg-gradient-to-r from-red-500 to-pink-500 hover:from-red-600 hover:to-pink-600 shadow-lg hover:shadow-xl transition-all duration-300",children:[(0,a.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"})}),"Sign In"]})})]})})})}}},function(e){e.O(0,[216,592,560],function(){return e(e.s=2696)}),_N_E=e.O()}]);