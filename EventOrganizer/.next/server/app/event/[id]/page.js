(()=>{var e={};e.id=744,e.ids=[744],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7790:e=>{"use strict";e.exports=require("assert")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2048:e=>{"use strict";e.exports=require("fs")},2615:e=>{"use strict";e.exports=require("http")},8791:e=>{"use strict";e.exports=require("https")},9801:e=>{"use strict";e.exports=require("os")},5315:e=>{"use strict";e.exports=require("path")},8621:e=>{"use strict";e.exports=require("punycode")},6162:e=>{"use strict";e.exports=require("stream")},4175:e=>{"use strict";e.exports=require("tty")},7360:e=>{"use strict";e.exports=require("url")},1764:e=>{"use strict";e.exports=require("util")},1568:e=>{"use strict";e.exports=require("zlib")},6093:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>h,originalPathname:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>d}),s(4101),s(2029),s(2824),s(7629),s(1930),s(2523);var a=s(3191),r=s(8716),n=s(7922),i=s.n(n),l=s(5231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let d=["",{children:["event",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,4101)),"/Users/asimsinanyuksel/Desktop/EventOrganizer/src/app/event/[id]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,2029)),"/Users/asimsinanyuksel/Desktop/EventOrganizer/src/app/layout.tsx"],template:[()=>Promise.resolve().then(s.bind(s,2824)),"/Users/asimsinanyuksel/Desktop/EventOrganizer/src/app/template.tsx"],error:[()=>Promise.resolve().then(s.bind(s,7629)),"/Users/asimsinanyuksel/Desktop/EventOrganizer/src/app/error.tsx"],loading:[()=>Promise.resolve().then(s.bind(s,1930)),"/Users/asimsinanyuksel/Desktop/EventOrganizer/src/app/loading.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,2523)),"/Users/asimsinanyuksel/Desktop/EventOrganizer/src/app/not-found.tsx"]}],c=["/Users/asimsinanyuksel/Desktop/EventOrganizer/src/app/event/[id]/page.tsx"],u="/event/[id]/page",h={require:s,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/event/[id]/page",pathname:"/event/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},2600:(e,t,s)=>{Promise.resolve().then(s.bind(s,2344))},5047:(e,t,s)=>{"use strict";var a=s(7389);s.o(a,"useParams")&&s.d(t,{useParams:function(){return a.useParams}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}})},2344:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>x});var a=s(326),r=s(7577),n=s(5668),i=s(2134),l=s(434),o=s(5047),d=s(9574),c=s(8886);s(2007);var u=s(7175),h=s(4916),m=s(1581);function x(){let{user:e}=(0,d.aC)(),{success:t,error:s,info:x}=(0,u.p)(),g=(0,o.useParams)(),v=g?.id,[p,f]=(0,r.useState)(null),[y,b]=(0,r.useState)(!0),[j,w]=(0,r.useState)(""),[N,k]=(0,r.useState)(!1),[S,C]=(0,r.useState)(!1),[E,_]=(0,r.useState)(!1),[D,I]=(0,r.useState)(!1),M=new n.P,A=new i.H,L=async()=>{try{b(!0);let t=await M.getEventById(v);if(t){if(f(t),_(e?.id===t.organizerId),I(t.attendeeCount>=t.capacity),e){let t=await A.isUserRegistered(v,e.id);k(t)}}else w("Event not found"),s("Event Not Found","The event you're looking for doesn't exist or is not public.")}catch(e){w("Failed to load event"),s("Failed to Load Event","There was an error loading the event details.")}finally{b(!1)}},U=async()=>{if(!e){x("Sign In Required","Please sign in to register for this event");return}try{C(!0),await A.registerAttendee({eventId:v,userId:e.id,type:"attendee",status:"registered",metadata:{customFields:{}}}),k(!0),await L(),t("Registration Successful!","You have been successfully registered for this event.")}catch(e){s("Registration Failed",e instanceof Error?e.message:"Failed to register for the event")}finally{C(!1)}},T=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return y?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50 to-indigo-100 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx(h.TK,{}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-4",children:"Loading event..."})]})}):j||!p?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-red-50 to-pink-100 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 flex items-center justify-center",children:a.jsx(h.Uo,{children:(0,a.jsxs)(h.Zb,{className:"p-12 text-center bg-white dark:bg-gray-800 shadow-xl border-0 max-w-md",children:[a.jsx("div",{className:"text-red-500 mb-6",children:a.jsx("svg",{className:"mx-auto h-16 w-16",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Event Not Found"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-8",children:j||"The event you're looking for doesn't exist or is not public."}),a.jsx(l.default,{href:"/",children:(0,a.jsxs)(h.zx,{className:"bg-gradient-to-r from-red-500 to-pink-500 hover:from-red-600 hover:to-pink-600 shadow-lg hover:shadow-xl transition-all duration-300",children:[a.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),"Go Home"]})})]})})}):"draft"===p.status?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-yellow-50 to-orange-100 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 flex items-center justify-center",children:a.jsx(h.Uo,{children:(0,a.jsxs)(h.Zb,{className:"p-12 text-center bg-white dark:bg-gray-800 shadow-xl border-0 max-w-md",children:[a.jsx("div",{className:"text-yellow-500 mb-6",children:a.jsx("svg",{className:"mx-auto h-16 w-16",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Event Not Available"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-8",children:"This event is not yet published."}),a.jsx(l.default,{href:"/",children:(0,a.jsxs)(h.zx,{className:"bg-gradient-to-r from-yellow-500 to-orange-500 hover:from-yellow-600 hover:to-orange-600 shadow-lg hover:shadow-xl transition-all duration-300",children:[a.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),"Browse Other Events"]})})]})})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50 to-indigo-100 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900",children:[a.jsx("div",{className:"fixed top-4 right-4 z-50",children:a.jsx(m.Tl,{showLabel:!1,className:"shadow-lg"})}),(0,a.jsxs)("div",{className:"relative overflow-hidden bg-white dark:bg-gray-800 shadow-xl",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-gray-700 dark:to-gray-600 opacity-50"}),a.jsx("div",{className:"relative max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:a.jsx(h.Uo,{delay:0,children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,a.jsxs)(l.default,{href:"/",className:"group flex items-center text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 transition-colors duration-300",children:[a.jsx("svg",{className:"w-5 h-5 mr-2 group-hover:-translate-x-1 transition-transform duration-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to Home"]}),(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 dark:text-white mb-2",children:p.title}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[a.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-semibold shadow-sm ${(e=>{switch(e){case"draft":default:return"bg-gray-100 text-gray-800";case"published":return"bg-blue-100 text-blue-800";case"live":return"bg-green-100 text-green-800";case"ended":case"cancelled":return"bg-red-100 text-red-800"}})(p.status)}`,children:p.status}),(0,a.jsxs)("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400",children:[a.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),p.attendeeCount," / ",p.capacity," attendees"]})]})]})]}),a.jsx("div",{className:"flex flex-wrap items-center gap-3",children:e?(0,a.jsxs)(a.Fragment,{children:[N?(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsxs)("span",{className:"px-4 py-2 bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 rounded-lg text-sm font-semibold shadow-sm",children:[a.jsx("svg",{className:"w-4 h-4 inline mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Registered"]}),a.jsx(l.default,{href:"/my-events",children:(0,a.jsxs)(h.zx,{variant:"outline",className:"bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600 transition-all duration-300",children:[a.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),"View My Events"]})})]}):a.jsx("button",{onClick:U,disabled:S||!p.registrationOpen||D,className:"group relative overflow-hidden bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 disabled:from-gray-400 disabled:to-gray-500 text-white px-6 py-3 rounded-xl shadow-lg hover:shadow-xl disabled:shadow-none transition-all duration-300 transform hover:-translate-y-1 disabled:transform-none disabled:cursor-not-allowed",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),a.jsx("span",{className:"font-semibold",children:S?"Registering...":D?"Event Full":"Register Now"})]})}),E&&a.jsx(l.default,{href:`/events/${v}`,children:(0,a.jsxs)(h.zx,{variant:"outline",className:"bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600 transition-all duration-300",children:[(0,a.jsxs)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Manage Event"]})})]}):a.jsx(l.default,{href:"/signin",children:(0,a.jsxs)(h.zx,{className:"bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 shadow-lg hover:shadow-xl transition-all duration-300",children:[a.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"})}),"Sign In to Register"]})})})]})})})]}),a.jsx("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,a.jsxs)("div",{className:"lg:col-span-2 space-y-8",children:[a.jsx(h.oX,{delay:100,direction:"up",children:(0,a.jsxs)(h.Zb,{className:"group relative overflow-hidden bg-white dark:bg-gray-800 shadow-xl hover:shadow-2xl transition-all duration-500 border-0",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-gray-700 dark:to-gray-600 opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),(0,a.jsxs)("div",{className:"relative p-8",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors duration-300",children:"About This Event"}),a.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed text-lg",children:p.description})]})]})}),a.jsx(h.oX,{delay:200,direction:"up",children:(0,a.jsxs)(h.Zb,{className:"group relative overflow-hidden bg-white dark:bg-gray-800 shadow-xl hover:shadow-2xl transition-all duration-500 border-0",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-green-50 to-emerald-50 dark:from-gray-700 dark:to-gray-600 opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),(0,a.jsxs)("div",{className:"relative p-8",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-8 group-hover:text-green-600 dark:group-hover:text-green-400 transition-colors duration-300",children:"Event Details"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"flex items-start space-x-4",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 dark:bg-blue-900 flex items-center justify-center flex-shrink-0",children:a.jsx("svg",{className:"w-5 h-5 text-blue-600 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Start Date"}),a.jsx("p",{className:"text-gray-900 dark:text-white mt-2 font-medium",children:T(p.startDate)})]})]}),(0,a.jsxs)("div",{className:"flex items-start space-x-4",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-red-100 dark:bg-red-900 flex items-center justify-center flex-shrink-0",children:a.jsx("svg",{className:"w-5 h-5 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"End Date"}),a.jsx("p",{className:"text-gray-900 dark:text-white mt-2 font-medium",children:T(p.endDate)})]})]}),(0,a.jsxs)("div",{className:"flex items-start space-x-4",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-purple-100 dark:bg-purple-900 flex items-center justify-center flex-shrink-0",children:a.jsx("svg",{className:"w-5 h-5 text-purple-600 dark:text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Capacity"}),(0,a.jsxs)("p",{className:"text-gray-900 dark:text-white mt-2 font-medium",children:[p.capacity," attendees"]})]})]}),(0,a.jsxs)("div",{className:"flex items-start space-x-4",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-yellow-100 dark:bg-yellow-900 flex items-center justify-center flex-shrink-0",children:a.jsx("svg",{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})})}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Type"}),a.jsx("p",{className:"text-gray-900 dark:text-white mt-2 font-medium capitalize",children:p.type})]})]})]})]})]})}),e&&N&&a.jsx(h.oX,{delay:300,direction:"up",children:a.jsx(h.Zb,{className:"bg-white dark:bg-gray-800 shadow-xl border-0",children:a.jsx(c.p,{eventId:v,userId:e.id})})})]}),(0,a.jsxs)("div",{className:"space-y-8",children:[a.jsx(h.oX,{delay:100,direction:"left",children:(0,a.jsxs)(h.Zb,{className:"group relative overflow-hidden bg-white dark:bg-gray-800 shadow-xl hover:shadow-2xl transition-all duration-500 border-0",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-green-50 to-emerald-50 dark:from-gray-700 dark:to-gray-600 opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),(0,a.jsxs)("div",{className:"relative p-8",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-6 group-hover:text-green-600 dark:group-hover:text-green-400 transition-colors duration-300",children:"Registration"}),e?a.jsx("div",{className:"space-y-4",children:N?(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"w-16 h-16 bg-green-100 dark:bg-green-900 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg",children:a.jsx("svg",{className:"w-8 h-8 text-green-600 dark:text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),a.jsx("p",{className:"text-green-600 dark:text-green-400 font-semibold text-lg",children:"You're registered!"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:"Check your email for details"})]}):(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("button",{onClick:U,disabled:S||!p.registrationOpen||D,className:"w-full group relative overflow-hidden bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 disabled:from-gray-400 disabled:to-gray-500 text-white px-6 py-4 rounded-xl shadow-lg hover:shadow-xl disabled:shadow-none transition-all duration-300 transform hover:-translate-y-1 disabled:transform-none disabled:cursor-not-allowed font-semibold",children:(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),a.jsx("span",{children:S?"Registering...":D?"Event Full":"Register Now"})]})}),(0,a.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-3",children:[p.attendeeCount," of ",p.capacity," spots taken",D&&a.jsx("span",{className:"text-red-600 dark:text-red-400 font-semibold",children:" - FULL"})]})]})}):(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Sign in to register for this event"}),a.jsx(l.default,{href:"/signin",children:(0,a.jsxs)(h.zx,{className:"w-full bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 shadow-lg hover:shadow-xl transition-all duration-300",children:[a.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"})}),"Sign In"]})})]})]})]})}),p.metadata&&a.jsx(h.oX,{delay:200,direction:"left",children:(0,a.jsxs)(h.Zb,{className:"group relative overflow-hidden bg-white dark:bg-gray-800 shadow-xl hover:shadow-2xl transition-all duration-500 border-0",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-50 to-pink-50 dark:from-gray-700 dark:to-gray-600 opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),(0,a.jsxs)("div",{className:"relative p-8",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-6 group-hover:text-purple-600 dark:group-hover:text-purple-400 transition-colors duration-300",children:"Event Features"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-emerald-100 dark:bg-emerald-900 flex items-center justify-center",children:a.jsx("svg",{className:"w-4 h-4 text-emerald-600 dark:text-emerald-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),a.jsx("span",{className:"text-sm font-semibold text-gray-600 dark:text-gray-300",children:"Live Chat"})]}),a.jsx("span",{className:`text-sm font-medium ${p.metadata.chatEnabled?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:p.metadata.chatEnabled?"Enabled":"Disabled"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-yellow-100 dark:bg-yellow-900 flex items-center justify-center",children:a.jsx("svg",{className:"w-4 h-4 text-yellow-600 dark:text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),a.jsx("span",{className:"text-sm font-semibold text-gray-600 dark:text-gray-300",children:"Q&A Session"})]}),a.jsx("span",{className:`text-sm font-medium ${p.metadata.qaEnabled?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:p.metadata.qaEnabled?"Enabled":"Disabled"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-pink-100 dark:bg-pink-900 flex items-center justify-center",children:a.jsx("svg",{className:"w-4 h-4 text-pink-600 dark:text-pink-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),a.jsx("span",{className:"text-sm font-semibold text-gray-600 dark:text-gray-300",children:"Networking"})]}),a.jsx("span",{className:`text-sm font-medium ${p.metadata.networkingEnabled?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:p.metadata.networkingEnabled?"Enabled":"Disabled"})]})]})]})]})}),a.jsx(h.oX,{delay:300,direction:"left",children:(0,a.jsxs)(h.Zb,{className:"group relative overflow-hidden bg-white dark:bg-gray-800 shadow-xl hover:shadow-2xl transition-all duration-500 border-0",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-indigo-50 to-blue-50 dark:from-gray-700 dark:to-gray-600 opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),(0,a.jsxs)("div",{className:"relative p-8",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-6 group-hover:text-indigo-600 dark:group-hover:text-indigo-400 transition-colors duration-300",children:"Share Event"}),a.jsx("button",{onClick:()=>{navigator.clipboard.writeText(window.location.href),t("Link Copied!","Event URL has been copied to your clipboard.")},className:"w-full group relative overflow-hidden bg-gradient-to-r from-indigo-600 to-blue-600 hover:from-indigo-700 hover:to-blue-700 text-white px-6 py-4 rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 font-semibold",children:(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"})}),a.jsx("span",{children:"Copy Event Link"})]})})]})]})})]})]})})]})}},8886:(e,t,s)=>{"use strict";s.d(t,{p:()=>y});var a=s(326),r=s(7577),n=s(2777);class i{static{this.HEARTBEAT_INTERVAL=3e4}static{this.PRESENCE_TIMEOUT=45e3}static{this.heartbeatIntervals=new Map}static{this.cleanupInterval=null}static{this.cleanupInterval=setInterval(()=>{this.cleanupExpiredPresence()},1e4)}static async startTracking(e,t){try{await this.updatePresence(e,t,!0,"active"),this.setupHeartbeat(e,t),this.setupVisibilityListener(e,t),this.setupBeforeUnloadListener(e,t)}catch(e){}}static async stopTracking(e,t){try{let s=`${e}-${t}`,a=this.heartbeatIntervals.get(s);a&&(clearInterval(a),this.heartbeatIntervals.delete(s));for(let s=0;s<3;s++)try{await this.updatePresence(e,t,!1,"away");break}catch(e){if(2===s)throw e}setTimeout(()=>{this.cleanupExpiredPresence()},1e3)}catch(e){}}static async getActiveUsers(e){try{let{data:t,error:s}=await n.supabase.from("user_presence").select("*").eq("event_id",e);t&&(new Date().getTime(),this.PRESENCE_TIMEOUT,t.forEach((e,t)=>{e.last_seen}));let{data:a,error:r}=await n.supabase.from("user_presence").select("*").eq("event_id",e).eq("is_online",!0).gte("last_seen",new Date(Date.now()-this.PRESENCE_TIMEOUT).toISOString());if(r)return[];return(a||[]).map(e=>({userId:e.user_id,eventId:e.event_id,isOnline:e.is_online,lastSeen:e.last_seen,status:e.status}))}catch(e){return[]}}static async updatePresence(e,t,s,a){try{let r=new Date().toISOString(),{error:i}=await n.supabase.rpc("upsert_user_presence",{p_user_id:t,p_event_id:e,p_is_online:s,p_status:a,p_last_seen:r,p_updated_at:r});i&&await this.simpleUpsert(e,t,s,a,r)}catch(e){}}static async simpleUpsert(e,t,s,a,r){try{let{data:i,error:l}=await n.supabase.from("user_presence").update({is_online:s,status:a,last_seen:r,updated_at:r}).eq("user_id",t).eq("event_id",e).select();if(!i||0===i.length){let{error:i}=await n.supabase.from("user_presence").insert({user_id:t,event_id:e,is_online:s,status:a,last_seen:r,updated_at:r});i&&i.code}}catch(e){}}static setupHeartbeat(e,t){let s=`${e}-${t}`,a=this.heartbeatIntervals.get(s);a&&clearInterval(a);let r=setInterval(async()=>{await this.updatePresence(e,t,!0,"active")},this.HEARTBEAT_INTERVAL);this.heartbeatIntervals.set(s,r)}static setupVisibilityListener(e,t){if("undefined"==typeof document)return;let s=async()=>{document.hidden?await this.updatePresence(e,t,!0,"idle"):await this.updatePresence(e,t,!0,"active")};document.addEventListener("visibilitychange",s)}static setupBeforeUnloadListener(e,t){}static async cleanupExpiredPresence(){try{let e=new Date(Date.now()-this.PRESENCE_TIMEOUT).toISOString(),{data:t,error:s}=await n.supabase.from("user_presence").update({is_online:!1,status:"away"}).lt("last_seen",e).eq("is_online",!0).select(),a=new Date(Date.now()-2*this.PRESENCE_TIMEOUT).toISOString(),{data:r,error:i}=await n.supabase.from("user_presence").delete().lt("last_seen",a).select();i||r&&r.length;let l=new Date(Date.now()-3e4).toISOString(),{data:o,error:d}=await n.supabase.from("user_presence").delete().eq("status","away").lt("last_seen",l).select();d||o&&o.length}catch(e){}}static async forceCleanupEvent(e){try{let{data:t,error:s}=await n.supabase.from("user_presence").select("*").eq("event_id",e);if(s)return;if(t&&t.length>0){let{error:t}=await n.supabase.from("user_presence").update({is_online:!1,status:"away"}).eq("event_id",e)}}catch(e){}}static async getDebugInfo(e){try{let{data:t,error:s}=await n.supabase.from("user_presence").select("*").eq("event_id",e),{data:a,error:r}=await n.supabase.from("user_presence").select("*").eq("event_id",e).eq("is_online",!0).gte("last_seen",new Date(Date.now()-this.PRESENCE_TIMEOUT).toISOString());return{allPresence:t||[],activeUsers:a||[],heartbeatIntervals:Array.from(this.heartbeatIntervals.keys()),errors:{allError:s,activeError:r}}}catch(e){return{error:e instanceof Error?e.message:String(e)}}}}class l{constructor(){this.supabase=n.supabase}async getEventStats(e){try{let t={totalAttendees:0,onlineAttendees:0,totalMessages:0,totalSessions:0,totalEvents:0,activeConnections:0};try{let{count:e}=await this.supabase.from("events").select("id",{count:"exact"});t.totalEvents=e||0}catch(e){t.totalEvents=0}try{let s=this.supabase.from("attendees").select("id",{count:"exact"});e&&s.eq("event_id",e);let{count:a}=await s;if(t.totalAttendees=a||0,a&&a>0)try{let s=(e?await i.getActiveUsers(e):[]).length;s>0?t.onlineAttendees=s:a<=2?t.onlineAttendees=a:a<=5?t.onlineAttendees=Math.min(a,Math.floor(.8*a)):a<=20?t.onlineAttendees=Math.floor(.4*a):t.onlineAttendees=Math.floor(.25*a)}catch(e){a<=2?t.onlineAttendees=a:t.onlineAttendees=Math.floor(.3*a)}else t.onlineAttendees=0}catch(e){t.totalAttendees=0,t.onlineAttendees=0}try{let s=this.supabase.from("event_messages").select("id",{count:"exact"});e&&s.eq("event_id",e);let{count:a}=await s;t.totalMessages=a||0}catch(e){t.totalMessages=0}try{let s=this.supabase.from("sessions").select("id",{count:"exact"});e&&s.eq("event_id",e);let{count:a}=await s;t.totalSessions=a||0}catch(e){t.totalSessions=0}return t.activeConnections=Math.floor(.8*t.onlineAttendees),t}catch(e){return{totalAttendees:0,onlineAttendees:0,totalMessages:0,totalSessions:0,totalEvents:0,activeConnections:0}}}async getSessionStats(e){try{let t={totalSessions:0,liveSessions:0,completedSessions:0,upcomingSessions:0};try{let s=this.supabase.from("sessions").select("id, status, start_time, end_time");e&&s.eq("event_id",e);let{data:a}=await s;a&&(t.totalSessions=a.length,t.liveSessions=a.filter(e=>"live"===e.status).length,t.completedSessions=a.filter(e=>"completed"===e.status).length,t.upcomingSessions=a.filter(e=>"scheduled"===e.status).length)}catch(e){t.totalSessions=0,t.liveSessions=0,t.completedSessions=0,t.upcomingSessions=0}return t}catch(e){return{totalSessions:0,liveSessions:0,completedSessions:0,upcomingSessions:0}}}async getAttendeeStats(e){try{let t={totalAttendees:0,onlineAttendees:0,registeredToday:0,activeAttendees:0};try{let s=this.supabase.from("attendees").select("id, status, created_at, updated_at");e&&s.eq("event_id",e);let{data:a}=await s;if(a){t.totalAttendees=a.length,a.length>0?1===a.length?t.onlineAttendees=1:2===a.length?t.onlineAttendees=2:a.length<=5?t.onlineAttendees=Math.min(a.length,Math.floor(.8*a.length)):a.length<=20?t.onlineAttendees=Math.floor(.4*a.length):t.onlineAttendees=Math.floor(.25*a.length):t.onlineAttendees=0,t.activeAttendees=a.filter(e=>"registered"===e.status||"checked_in"===e.status).length;let e=new Date;e.setHours(0,0,0,0),t.registeredToday=a.filter(t=>new Date(t.created_at)>=e).length}}catch(e){t.totalAttendees=0,t.onlineAttendees=0,t.activeAttendees=0,t.registeredToday=0}return t}catch(e){return{totalAttendees:0,onlineAttendees:0,registeredToday:0,activeAttendees:0}}}async getMessageStats(e){try{let t={totalMessages:0,messagesToday:0,averageResponseTime:0,activeConversations:0};try{let s=this.supabase.from("event_messages").select("id, created_at",{count:"exact"});e&&s.eq("event_id",e);let{data:a,count:r}=await s;if(t.totalMessages=r||0,a){let e=new Date;e.setHours(0,0,0,0);let s=a.filter(t=>new Date(t.created_at)>=e).length;t.messagesToday=s}}catch(e){}return t}catch(e){return{totalMessages:0,messagesToday:0,averageResponseTime:0,activeConversations:0}}}async getConnectionStats(e){try{let t={activeConnections:0,totalConnections:0,averageConnectionTime:0,peakConnections:0};try{let s=(e?await i.getActiveUsers(e):[]).length;if(s>0)t.activeConnections=s;else{let{count:s}=await this.supabase.from("attendees").select("id",{count:"exact"}).eq("event_id",e);s&&s>0?s<=2?t.activeConnections=s:t.activeConnections=Math.min(s,2):t.activeConnections=0}}catch(e){t.activeConnections=0}return t.totalConnections=2*t.activeConnections,t.averageConnectionTime=0,t.peakConnections=t.activeConnections,t}catch(e){return{activeConnections:0,totalConnections:0,averageConnectionTime:0,peakConnections:0}}}}let o=new l;var d=s(4103),c=s(2007);class u{constructor(){this.supabase=n.supabase}async saveMessage(e){try{let t=crypto.randomUUID(),{data:s,error:a}=await this.supabase.from("event_messages").insert({id:t,event_id:e.eventId,user_id:e.userId,message:e.message,user_name:e.userName,metadata:e.metadata||{},created_at:new Date().toISOString(),updated_at:new Date().toISOString()}).select().single();if(a)throw Error(`Database error: ${a.message}`);return this.mapRowToMessage(s)}catch(e){throw Error(`Failed to save message: ${e instanceof Error?e.message:"Unknown error"}`)}}async getEventMessages(e,t=50){try{let{data:s,error:a}=await this.supabase.from("event_messages").select("*").eq("event_id",e).order("created_at",{ascending:!0}).limit(t);if(a)throw Error(`Database error: ${a.message}`);return(s||[]).map(e=>this.mapRowToMessage(e))}catch(e){return[]}}mapRowToMessage(e){return{id:e.id,eventId:e.event_id,userId:e.user_id,message:e.message,userName:e.user_name,metadata:e.metadata||{},createdAt:e.created_at,updatedAt:e.updated_at}}}let h=new u;class m{static{this.userCache=new Map}static{this.cacheExpiry=new Map}static{this.CACHE_DURATION=3e5}static async getUserDisplayInfo(e){let t=this.getCachedUser(e);if(t)return t;try{let{data:t,error:s}=await n.supabase.from("users").select("id, email, name").eq("id",e).single();if(s)return this.createFallbackDisplayInfo(e);if(!t){try{let{data:t}=await n.supabase.auth.getUser();if(t?.user?.id===e){let s=t.user.user_metadata?.full_name||t.user.email?.split("@")[0]||"User";return{id:e,displayName:s,email:t.user.email||void 0,avatarUrl:void 0}}}catch(e){}return this.createFallbackDisplayInfo(e)}let a=this.formatDisplayName(t.name,t.email);if(!t.name||""===t.name.trim())try{let{data:t}=await n.supabase.auth.getUser();t?.user?.id===e&&(a=t.user.user_metadata?.full_name||t.user.email?.split("@")[0]||"User")}catch(e){}let r={id:t.id,displayName:a,email:t.email,avatarUrl:void 0};return this.cacheUser(e,r),r}catch(t){return this.createFallbackDisplayInfo(e)}}static async getMultipleUserDisplayInfo(e){let t=new Map,s=[];for(let a of e){let e=this.getCachedUser(a);e?t.set(a,e):s.push(a)}if(0===s.length)return t;try{let{data:e,error:a}=await n.supabase.from("users").select("id, email, name").in("id",s);if(a){for(let e of s)t.set(e,this.createFallbackDisplayInfo(e));return t}for(let s of e||[]){let e=this.formatDisplayName(s.name,s.email);if(!s.name||""===s.name.trim())try{let{data:t}=await n.supabase.auth.getUser();t?.user?.id===s.id&&(e=t.user?.user_metadata?.full_name||t.user?.email?.split("@")[0]||"User")}catch(e){}let a={id:s.id,displayName:e,email:s.email,avatarUrl:void 0};t.set(s.id,a),this.cacheUser(s.id,a)}for(let e of s)t.has(e)||t.set(e,this.createFallbackDisplayInfo(e));return t}catch(e){for(let e of s)t.set(e,this.createFallbackDisplayInfo(e));return t}}static formatDisplayName(e,t){return e&&e.trim()?e.trim():t?t.split("@")[0].split(".").map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(" "):"Anonymous User"}static createFallbackDisplayInfo(e){return{id:e,displayName:`User ${e.slice(0,8)}`,email:"unknown@example.com",fullName:void 0,avatarUrl:void 0}}static getCachedUser(e){let t=this.cacheExpiry.get(e);return t&&Date.now()<t&&this.userCache.get(e)||null}static cacheUser(e,t){this.userCache.set(e,t),this.cacheExpiry.set(e,Date.now()+this.CACHE_DURATION)}static clearUserCache(e){this.userCache.delete(e),this.cacheExpiry.delete(e)}static clearAllCache(){this.userCache.clear(),this.cacheExpiry.clear()}}let x=({eventId:e,initialCount:t})=>{let[n,i]=(0,r.useState)(t),[l,o]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{let t=async()=>{try{let{supabase:t}=await Promise.resolve().then(s.bind(s,2777)),{count:a}=await t.from("attendees").select("id",{count:"exact"}).eq("event_id",e);null!==a&&a!==n&&(i(a),o(!0),setTimeout(()=>o(!1),2e3))}catch(e){}};t();let a=setInterval(t,1e4);return()=>clearInterval(a)},[e,n]),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("span",{className:"text-sm font-medium",children:[n," attendees"]}),l&&(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[a.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),a.jsx("span",{className:"text-xs text-red-500",children:"LIVE"})]})]})},g=({eventId:e,userId:t})=>{let[n,l]=(0,r.useState)([]),[o,d]=(0,r.useState)(""),[u,x]=(0,r.useState)(!1),[g,v]=(0,r.useState)(!1),[p,f]=(0,r.useState)(null),[y,b]=(0,r.useState)(!0),j=(0,r.useRef)(null),w=()=>{j.current?.scrollIntoView({behavior:"smooth"})};(0,r.useEffect)(()=>{w()},[n]),(0,r.useEffect)(()=>{let a=async(r=0)=>{try{i.startTracking(e,t);let a=await h.getEventMessages(e,50);l(a),b(!1);let{supabase:r}=await Promise.resolve().then(s.bind(s,2777));console.log("Supabase client:",r),console.log("Event ID:",e);try{let{data:e,error:t}=await r.from("events").select("id").limit(1);t?(console.log("Supabase connection test failed:",t),f(`Database connection failed: ${t.message}`)):console.log("Supabase connection test successful")}catch(e){console.log("Supabase connection test error:",e),f("Failed to connect to Supabase - check CORS settings")}let n=r.channel(`event-chat-${e}`);return console.log("Channel created:",n),n.on("broadcast",{event:"chat-message"},a=>{let{message:r,userId:n,userName:i,timestamp:o}=a;if(n===t)return;let d="Unknown User";i&&"You"!==i&&""!==i.trim()?d=i:n&&(d=`User ${n.slice(0,8)}`);let c=`${n||"unknown"}-${o||Date.now()}`,u={id:c,eventId:e,userId:n,message:r,userName:d,metadata:{},createdAt:o||new Date().toISOString(),updatedAt:o||new Date().toISOString()};l(e=>[...e,u]),n&&("Unknown User"===d||d.startsWith("User "))&&m.getUserDisplayInfo(n).then(e=>{l(t=>t.map(t=>t.id===c?{...t,userName:e.displayName}:t))}).catch(e=>{n&&Promise.resolve().then(s.bind(s,2777)).then(({supabase:e})=>e.auth.getUser()).then(({data:e})=>{if(e?.user?.id===n){let t=e.user?.user_metadata?.full_name||e.user?.email?.split("@")[0]||`User ${n.slice(0,8)}`;l(e=>e.map(e=>e.id===c?{...e,userName:t}:e))}}).catch(()=>{})})}).on("broadcast",{event:"typing"},e=>{}).subscribe(e=>{console.log("Supabase channel status:",e),v("SUBSCRIBED"===e),"SUBSCRIBED"===e?f(null):"CHANNEL_ERROR"===e?f("Channel connection failed"):"TIMED_OUT"===e?f("Connection timed out"):"CLOSED"===e?f("Connection closed"):f(`Connection status: ${e}`)}),setTimeout(()=>{g||(console.log("Connection timeout - still not connected after 5 seconds"),f("Connection timeout - check Supabase CORS and real-time settings"))},5e3),()=>{n.unsubscribe(),i.stopTracking(e,t)}}catch(e){f("Failed to setup chat connection"),v(!1),r<3&&setTimeout(()=>{a(r+1)},2e3*(r+1))}};a();let r=setInterval(()=>{},6e4);return()=>{clearInterval(r)}},[e,t]);let N=async a=>{if(a.preventDefault(),!o.trim())return;let r=o.trim(),n=new Date().toISOString(),i="You";try{if(i=(await m.getUserDisplayInfo(t)).displayName||"You","You"===i||i.startsWith("User "))try{let{supabase:e}=await Promise.resolve().then(s.bind(s,2777)),{data:a}=await e.auth.getUser();a?.user?.id===t&&(i=a.user.user_metadata?.full_name||a.user.email?.split("@")[0]||"User")}catch(e){}}catch(e){i="You"}try{let a=await h.saveMessage({eventId:e,userId:t,message:r,userName:i});l(e=>[...e,a]),d(""),x(!1),setTimeout(w,100),c.c.updateLastSeen(t,e);let{supabase:o}=await Promise.resolve().then(s.bind(s,2777)),u=o.channel(`event-chat-${e}`);await u.send({type:"broadcast",event:"chat-message",payload:{message:r,userId:t,userName:i,timestamp:n}})}catch(a){let s={id:`${t}-${Date.now()}`,eventId:e,userId:t,message:r,userName:"You",metadata:{},createdAt:n,updatedAt:n};l(e=>[...e,s]),d(""),x(!1),setTimeout(w,100)}};return(0,a.jsxs)("div",{className:"border rounded-lg p-4 h-64 flex flex-col",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2 pb-2 border-b",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Event Chat"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${g?"bg-green-500":"bg-red-500"}`}),a.jsx("span",{className:"text-xs text-gray-500",children:g?"Connected":p||"Disconnected"}),!g&&a.jsx("button",{onClick:()=>window.location.reload(),className:"text-xs text-blue-500 hover:text-blue-700",children:"Retry"})]})]}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto space-y-2 mb-4",children:[y?(0,a.jsxs)("div",{className:"text-center text-gray-500 text-sm py-4",children:[a.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600 mx-auto mb-2"}),"Loading messages..."]}):0===n.length?a.jsx("div",{className:"text-center text-gray-500 text-sm py-4",children:"No messages yet. Start the conversation!"}):n.map(e=>a.jsx("div",{className:`flex ${e.userId===t?"justify-end":"justify-start"}`,children:(0,a.jsxs)("div",{className:`max-w-xs px-3 py-2 rounded-lg ${e.userId===t?"bg-blue-500 text-white":"bg-gray-200 text-gray-800"}`,children:[a.jsx("div",{className:"text-sm",children:e.message}),(0,a.jsxs)("div",{className:"text-xs opacity-75 mt-1",children:[e.userName," • ",new Date(e.createdAt).toLocaleTimeString()]})]})},e.id)),a.jsx("div",{ref:j})]}),(0,a.jsxs)("form",{onSubmit:N,className:"flex space-x-2",children:[a.jsx("input",{type:"text",value:o,onChange:e=>{d(e.target.value),x(e.target.value.length>0)},placeholder:"Type a message...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:!g}),a.jsx("button",{type:"submit",disabled:!o.trim()||!g,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed",children:"Send"})]}),u&&a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Typing..."})]})},v=({eventId:e,maxDisplay:t=5})=>{let[s,n]=(0,r.useState)([]),[l,o]=(0,r.useState)(new Map),[d,c]=(0,r.useState)(!0),[u,h]=(0,r.useState)(null);if((0,r.useEffect)(()=>{let t=async()=>{try{c(!0);let t=await i.getActiveUsers(e);n(t);let s=t.map(e=>e.userId).filter(Boolean);if(s.length>0){let e=await m.getMultipleUserDisplayInfo(s);o(e)}h(null)}catch(e){h("Failed to fetch users")}finally{c(!1)}};t();let s=setInterval(t,3e3);return()=>clearInterval(s)},[e]),d)return(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Online Users"}),a.jsx("div",{className:"text-sm text-gray-500",children:"Loading..."})]});if(u)return(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Online Users"}),(0,a.jsxs)("div",{className:"text-sm text-red-500",children:["Error: ",u]})]});let x=s.length,g=s.slice(0,t);return(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"text-sm font-medium text-gray-700",children:["Online (",x,")"]}),a.jsx("div",{className:"space-y-1",children:g.map((e,t)=>{let s=e.userId,r=s?l.get(s):null,n=r?.displayName||`User ${s?s.slice(0,8):"Unknown"}`;return(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),a.jsx("span",{className:"text-sm text-gray-700",children:n}),a.jsx("span",{className:"text-xs text-gray-500",children:e.status})]},s||t)})}),0===s.length&&a.jsx("div",{className:"text-sm text-gray-500",children:"No users online"}),s.length>t&&(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["+",s.length-t," more"]})]})},p=({eventId:e,maxItems:t=10})=>{let[s,n]=(0,r.useState)([]),[l,o]=(0,r.useState)(new Map),[d,c]=(0,r.useState)(!0),[u,h]=(0,r.useState)(null);if((0,r.useEffect)(()=>{let s=async()=>{try{c(!0);let s=await i.getActiveUsers(e),a=s.map((e,t)=>({id:`activity_${e.userId}_${Date.now()}_${t}`,userId:e.userId,type:"join",message:"joined the event",timestamp:new Date().toISOString()}));n(a.slice(0,t));let r=s.map(e=>e.userId).filter(Boolean);if(r.length>0){let e=await m.getMultipleUserDisplayInfo(r);o(e)}h(null)}catch(e){h("Failed to fetch activities")}finally{c(!1)}};s();let a=setInterval(s,5e3);return()=>clearInterval(a)},[e,t]),d)return(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Recent Activity"}),a.jsx("div",{className:"text-sm text-gray-500",children:"Loading..."})]});if(u)return(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Recent Activity"}),(0,a.jsxs)("div",{className:"text-sm text-red-500",children:["Error: ",u]})]});let x=e=>{switch(e){case"join":case"leave":return"\uD83D\uDC4B";case"message":return"\uD83D\uDCAC";case"update":return"✏️";case"view":return"\uD83D\uDC41️";case"interact":return"\uD83E\uDD1D";default:return"\uD83D\uDCDD"}},g=e=>{let t=new Date(e),s=new Date().getTime()-t.getTime(),a=Math.floor(s/6e4),r=Math.floor(s/36e5);return a<1?"Just now":a<60?`${a}m ago`:r<24?`${r}h ago`:t.toLocaleDateString()};return(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Recent Activity"}),a.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:0===s.length?a.jsx("div",{className:"text-sm text-gray-500",children:"No recent activity"}):s.map(e=>{let t=e.userId?l.get(e.userId):null,s=t?.displayName||`User ${e.userId?e.userId.slice(0,8):"Unknown"}`;return(0,a.jsxs)("div",{className:"flex items-start space-x-2 text-sm",children:[a.jsx("span",{className:"text-lg",children:x(e.type)}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{children:[a.jsx("span",{className:"font-medium",children:s}),(0,a.jsxs)("span",{className:"text-gray-600",children:[" ",e.message||e.type]})]}),a.jsx("div",{className:"text-xs text-gray-500",children:g(e.timestamp)})]})]},e.id)})})]})};var f=s(5668);let y=({eventId:e,userId:t})=>{let[n,l]=(0,r.useState)(!1),[u,h]=(0,r.useState)("connecting"),{eventStats:m,sessionStats:y,attendeeStats:b,messageStats:j,connectionStats:w,isLoading:N,error:k,lastUpdated:S,refetch:C}=function(e,t={}){return function(e={}){let{eventId:t,refreshInterval:s=3e4,autoRefresh:a=!0}=e,[n,i]=(0,r.useState)({eventStats:{totalAttendees:0,onlineAttendees:0,totalMessages:0,totalSessions:0,totalEvents:0,activeConnections:0},sessionStats:{totalSessions:0,liveSessions:0,completedSessions:0,upcomingSessions:0},attendeeStats:{totalAttendees:0,onlineAttendees:0,registeredToday:0,activeAttendees:0},messageStats:{totalMessages:0,messagesToday:0,averageResponseTime:0,activeConversations:0},connectionStats:{activeConnections:0,totalConnections:0,averageConnectionTime:0,peakConnections:0},isLoading:!0,error:null,lastUpdated:null,refetch:async()=>{}}),l=(0,r.useCallback)(async()=>{try{i(e=>({...e,isLoading:!0,error:null}));let[e,s,a,r,n]=await Promise.all([o.getEventStats(t),o.getSessionStats(t),o.getAttendeeStats(t),o.getMessageStats(t),o.getConnectionStats(t)]);i(t=>({...t,eventStats:e,sessionStats:s,attendeeStats:a,messageStats:r,connectionStats:n,isLoading:!1,error:null,lastUpdated:new Date}))}catch(e){i(t=>({...t,isLoading:!1,error:e instanceof Error?e.message:"Failed to fetch statistics"}))}},[t]);return{...n,refetch:l}}({...t,eventId:e})}(e,{refreshInterval:2e3}),[E,_]=(0,r.useState)(null),[D,I]=(0,r.useState)(!0),[M,A]=(0,r.useState)("overview"),L=new f.P;return(0,r.useEffect)(()=>{let e=async()=>{try{h("connecting");let{supabase:e}=await Promise.resolve().then(s.bind(s,2777)),{data:t,error:a}=await e.from("events").select("id").limit(1);a?(h("error"),l(!1)):(h("connected"),l(!0))}catch(e){h("error"),l(!1)}};e();let t=setInterval(e,3e4);return()=>clearInterval(t)},[]),(0,r.useEffect)(()=>{let t=async()=>{try{I(!0);let t=await L.getEventById(e);_(t)}catch(e){_(null)}finally{I(!1)}};e&&t()},[e]),(0,r.useEffect)(()=>{c.c.trackConnection(t,e),i.startTracking(e,t);let s=setInterval(()=>{c.c.updateLastSeen(t,e)},3e4),a=()=>{i.stopTracking(e,t)},r=()=>{document.hidden?i.stopTracking(e,t):(i.startTracking(e,t),C())};return window.addEventListener("beforeunload",a),document.addEventListener("visibilitychange",r),()=>{clearInterval(s),c.c.removeConnection(t,e),i.stopTracking(e,t),window.removeEventListener("beforeunload",a),document.removeEventListener("visibilitychange",r)}},[t,e]),(0,a.jsxs)("div",{className:"max-w-6xl mx-auto p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Live Event Dashboard"}),(0,a.jsxs)("p",{className:"text-gray-600",children:["Live updates and interactions for ",D?"Loading...":E?.title||`Event #${e}`]})]}),a.jsx("div",{className:"flex items-center space-x-4",children:a.jsx(d._,{})})]}),!n&&a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-4 h-4 bg-yellow-500 rounded-full mr-3"}),(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Connection Issue"}),(0,a.jsxs)("p",{className:"text-sm text-yellow-700",children:["Real-time features are currently unavailable. Status: ",u]})]})]})}),a.jsx("div",{className:"border-b border-gray-200",children:a.jsx("nav",{className:"-mb-px flex space-x-8",children:[{id:"overview",label:"Overview",icon:"\uD83D\uDCCA"},{id:"chat",label:"Chat",icon:"\uD83D\uDCAC"},{id:"activity",label:"Activity",icon:"\uD83D\uDCDD"},{id:"users",label:"Users",icon:"\uD83D\uDC65"}].map(e=>(0,a.jsxs)("button",{onClick:()=>A(e.id),className:`py-2 px-1 border-b-2 font-medium text-sm ${M===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[a.jsx("span",{className:"mr-2",children:e.icon}),e.label]},e.id))})}),(0,a.jsxs)("div",{className:"min-h-96",children:["overview"===M&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white border rounded-lg p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Live Attendance"}),a.jsx(x,{eventId:e,initialCount:b.onlineAttendees})]}),(0,a.jsxs)("div",{className:"bg-white border rounded-lg p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:"Event Updates"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[N&&a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}),a.jsx("button",{onClick:C,className:"px-3 py-1 text-xs bg-blue-50 text-blue-600 hover:bg-blue-100 rounded-md transition-colors",disabled:N,children:"Refresh"})]})]}),k?(0,a.jsxs)("div",{className:"text-center text-red-600 text-sm bg-red-50 p-4 rounded-lg",children:["Error loading stats: ",k]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Attendance"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 p-6 rounded-xl text-center shadow-sm",children:[a.jsx("div",{className:"text-4xl font-bold text-blue-600 mb-2",children:N?"...":m.totalAttendees}),a.jsx("div",{className:"text-sm font-semibold text-blue-700 mb-1",children:"Total Attendees"}),a.jsx("div",{className:"text-xs text-blue-600",children:"Registered users"})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-green-100 p-6 rounded-xl text-center shadow-sm",children:[a.jsx("div",{className:"text-4xl font-bold text-green-600 mb-2",children:N?"...":m.onlineAttendees}),a.jsx("div",{className:"text-sm font-semibold text-green-700 mb-1",children:"Online Now"}),a.jsx("div",{className:"text-xs text-green-600",children:"Currently active"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Activity"}),a.jsx("div",{className:"grid grid-cols-1 gap-4",children:(0,a.jsxs)("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 p-6 rounded-xl text-center shadow-sm",children:[a.jsx("div",{className:"text-4xl font-bold text-purple-600 mb-2",children:N?"...":m.totalMessages}),a.jsx("div",{className:"text-sm font-semibold text-purple-700 mb-1",children:"Messages Sent"}),a.jsx("div",{className:"text-xs text-purple-600",children:"In event chat"})]})})]})]}),a.jsx("div",{className:"bg-gradient-to-r from-teal-50 to-teal-100 p-6 rounded-xl shadow-sm",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"text-3xl font-bold text-teal-600 mb-2",children:[N?"...":Math.round(m.onlineAttendees/Math.max(m.totalAttendees,1)*100),"%"]}),a.jsx("div",{className:"text-lg font-semibold text-teal-700 mb-1",children:"Engagement Rate"}),a.jsx("div",{className:"text-sm text-teal-600",children:"Percentage of attendees currently online"})]}),a.jsx("div",{className:"w-16 h-16 bg-teal-200 rounded-full flex items-center justify-center ml-6",children:a.jsx("svg",{className:"w-8 h-8 text-teal-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})})]})})]}),S&&(0,a.jsxs)("div",{className:"mt-4 text-xs text-gray-500 text-center bg-gray-50 px-3 py-2 rounded-md",children:["Last updated: ",S.toLocaleTimeString()]})]})]}),"chat"===M&&(0,a.jsxs)("div",{className:"bg-white border rounded-lg p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Event Chat"}),a.jsx(g,{eventId:e,userId:t})]}),"activity"===M&&(0,a.jsxs)("div",{className:"bg-white border rounded-lg p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Recent Activity"}),a.jsx(p,{eventId:e,maxItems:20})]}),"users"===M&&a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:(0,a.jsxs)("div",{className:"bg-white border rounded-lg p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"User Presence"}),a.jsx(v,{eventId:e,maxDisplay:10})]})})]})]})}},2007:(e,t,s)=>{"use strict";s.d(t,{c:()=>n});var a=s(2777);class r{constructor(){this.connections=new Map,this.cleanupInterval=null,this.startCleanup()}async trackConnection(e,t){let s=`${e}-${t}`,r=new Date;this.connections.set(s,{userId:e,eventId:t,connectedAt:r,lastSeen:r});try{let s=a.supabase.channel(`event-connections-${t}`);await s.send({type:"broadcast",event:"user-connected",payload:{userId:e,eventId:t,connectedAt:r.toISOString(),activeConnections:this.getActiveConnectionsForEvent(t)}})}catch(e){}}updateLastSeen(e,t){let s=`${e}-${t}`,a=this.connections.get(s);a&&(a.lastSeen=new Date,this.connections.set(s,a))}async removeConnection(e,t){let s=`${e}-${t}`;this.connections.delete(s);try{let s=a.supabase.channel(`event-connections-${t}`);await s.send({type:"broadcast",event:"user-disconnected",payload:{userId:e,eventId:t,activeConnections:this.getActiveConnectionsForEvent(t)}})}catch(e){}}getActiveConnectionsForEvent(e){let t=new Date(Date.now()-3e5);return Array.from(this.connections.values()).filter(s=>s.eventId===e&&s.lastSeen>=t).length}getActiveConnections(){let e=new Date(Date.now()-3e5);return Array.from(this.connections.values()).filter(t=>t.lastSeen>=e).length}getConnectionInfo(e,t){let s=`${e}-${t}`;return this.connections.get(s)||null}startCleanup(){this.cleanupInterval=setInterval(()=>{let e=new Date(Date.now()-3e5);for(let[t,s]of this.connections.entries())s.lastSeen<e&&this.connections.delete(t)},6e4)}destroy(){this.cleanupInterval&&(clearInterval(this.cleanupInterval),this.cleanupInterval=null)}}let n=new r},4101:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(8570).createProxy)(String.raw`/Users/asimsinanyuksel/Desktop/EventOrganizer/src/app/event/[id]/page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[276,902,166,601],()=>s(6093));module.exports=a})();